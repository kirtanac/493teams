(this.webpackJsonp493teams=this.webpackJsonp493teams||[]).push([[0],{111:function(e,t,a){},129:function(e,t){},131:function(e,t){},141:function(e,t,a){},142:function(e,t,a){"use strict";a.r(t);var s=a(2),n=a(1),i=a.n(n),c=a(22),r=a.n(c),o=(a(111),a(112),a(14)),l=a(15),d=a(17),u=a(16),m=(a.p,a(28),a(49));m.a.initializeApp({apiKey:"AIzaSyC2y91CURRmBsyzrIi96IVx_2tdnMEIYpw",authDomain:"eecs-493-96f7b.firebaseapp.com",databaseURL:"https://eecs-493-96f7b.firebaseio.com",projectId:"eecs-493-96f7b",storageBucket:"eecs-493-96f7b.appspot.com",messagingSenderId:"746380302805",appId:"1:746380302805:web:d44a0675ece3ea84d2855c"});var h=m.a,j=a(30),b=a(11),p=a.n(b),g=a(13),f=a(12),O={getUserInfo:function(){var e=Object(g.a)(p.a.mark((function e(t){var a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("in getUserInfo",t),e.next=3,m.a.firestore();case 3:return(s=e.sent).settings({timestampsInSnapshots:!0}),e.next=7,s.collection("users").doc(t).get().then((function(e){var t;console.log("returned ",e),t=e.data().isAdmin?"admin":e.data().onTeam?"team":"unassigned",(a=e.data()).usertype=t})).catch((function(e){console.log("error!"),a="error"}));case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getTeamInfo:function(){var e=Object(g.a)(p.a.mark((function e(t){var a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s=m.a.firestore()).settings({timestampsInSnapshots:!0}),e.next=4,s.collection("teams").doc(t).get().then((function(e){console.log("returned ",e),a=e.data()})).catch((function(e){console.log("error!"),a="error"}));case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getTeamFromUser:function(){var e=Object(g.a)(p.a.mark((function e(t){var a,s,n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=m.a.firestore()).settings({timestampsInSnapshots:!0}),e.next=4,a.collection("users").doc(t).get().then((function(e){!1===e.data().onTeam?s=!1:(s=!0,n=e.data().teamName)}));case 4:if(!s){e.next=9;break}return e.next=7,a.collection("teams").doc(n).get().then((function(e){i=e.data(),console.log("data in helpers: ",i)}));case 7:e.next=10;break;case 9:i="not on team";case 10:return console.log("returned ",i),e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),userStatus:function(){var e=Object(g.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=m.a.firestore()).settings({timestampsInSnapshots:!0}),e.next=4,a.collection("users").doc(t).get().then((function(e){return e.empty?"not on roster":e.data().isAdmin?"admin":e.data().onTeam?"team":"unassigned"}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=a(156),v=a(101),y=a(155),S=a(23),q=a(160),N=a(148),I=a(157),T=a(149),w=(a(61),a(41)),k=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={isLoggedIn:!1,accessToken:"",uniqname:sessionStorage.getItem("uniqname"),usertype:sessionStorage.getItem("user-type"),onTeam:!1,searched:!1,searchVal:"",searchType:"",foundTeam:!1,teamName:"",teams:[],teamsLoaded:!1,users:[],usersLoaded:!1,unassigned:[],unassignedLoaded:!1},s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t,a,s,n,i=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=h.firestore()).settings({timestampsInSnapshots:!0}),e.next=4,O.getUserInfo(this.state.uniqname).then((function(e){i.setState({usertype:e.usertype}),sessionStorage.setItem("user-type",e.usertype),console.log("user data updated: ",e)}));case 4:return a=[],e.next=7,t.collection("teams").get().then((function(e){e.docs.forEach((function(e){a.push(e.data())})),i.setState({teams:a,teamsLoaded:!0}),console.log("teams loaded: ",a)}));case 7:return s=[],e.next=10,t.collection("users").get().then((function(e){e.docs.forEach((function(e){s.push(e.data())})),i.setState({users:s,usersLoaded:!0}),console.log("users_in loaded: ",s)}));case 10:return n=[],e.next=13,t.collection("users").where("onTeam","==",!1).get().then((function(e){e.docs.forEach((function(e){n.push(e.data())})),i.setState({unassigned:n,unassignedLoaded:!0}),console.log("unassigned loaded: ",n)}));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(s.jsx)(q.a,{placement:"right",className:"mb-1 float-right",overlay:Object(s.jsx)(N.a,{className:"text-left",id:"tooltip-top",children:"Download CSVs of registered teams, all users, and users with no team"}),children:Object(s.jsxs)(I.a,{className:"align-self-right",as:T.a,children:[Object(s.jsx)(v.a,{variant:"secondary",nohover:!0,className:"btn-download-data",active:!0,children:"Download Data"}),Object(s.jsx)(I.a.Toggle,{split:!0,variant:"secondary",id:"dropdown-split-basic",active:!0}),Object(s.jsxs)(I.a.Menu,{children:[this.state.teamsLoaded&&Object(s.jsx)(w.CSVLink,{data:this.state.teams,filename:"teams.csv",className:" w-100 btn btn-outline-secondary align-items-sm-center rounded-0",target:"_blank",children:"teams.csv"}),this.state.usersLoaded&&Object(s.jsx)(w.CSVLink,{data:this.state.users,filename:"users.csv",className:"btn w-100 btn-outline-secondary align-items-sm-center rounded-0",target:"_blank",children:"users.csv"}),this.state.unassignedLoaded&&Object(s.jsx)(w.CSVLink,{data:this.state.unassigned,filename:"unassigned.csv",className:"btn w-100 btn-outline-secondary align-items-sm-center rounded-0",target:"_blank",children:"unassigned.csv"})]})]})},"right")}}]),a}(i.a.Component),L=a(88),C="718813902892-24n6sjnr041if9ip2dcf68kvvi4q1ssn.apps.googleusercontent.com",E=h.firestore(),M=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={isLoggedIn:!1,accessToken:"",navbar:e.navbar},s.login=s.login.bind(Object(f.a)(s)),s.handleLoginFailure=s.handleLoginFailure.bind(Object(f.a)(s)),s.logout=s.logout.bind(Object(f.a)(s)),s.handleLogoutFailure=s.handleLogoutFailure.bind(Object(f.a)(s)),s}return Object(l.a)(a,[{key:"login",value:function(){var e=Object(g.a)(p.a.mark((function e(t){var a,s,n,i,c=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.accessToken&&(this.setState((function(e){return{isLoggedIn:!0,accessToken:t.accessToken}})),a="",s=t.profileObj.email,console.log("get status email: "),s.endsWith("@umich.edu")||(console.log("not umich email address"),a="Must be a University of Michigan email address"),n=s.split("@"),i=n[0],E.collection("users").doc(i).get().then((function(e){console.log("snapshot",e.data()),e.empty&&(console.log("return status"),a="not on roster"),a=e.data().isAdmin?"admin":e.data().onTeam?"team":"unassigned",c.props.callback({status:"success",type:"login","user-type":a,uniqname:i,accessToken:c.state.accessToken})})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(e){this.setState((function(e){return{isLoggedIn:!1,accessToken:""}})),sessionStorage.clear(),this.props.callback({status:"success",type:"logout"})}},{key:"handleLoginFailure",value:function(e){alert("Failed to log in"),this.props.callback({status:"error",type:"login"})}},{key:"handleLogoutFailure",value:function(e){alert("Failed to log out"),this.props.callback({status:"error",type:"logout"})}},{key:"render",value:function(){return this.state.navbar||this.state.isLoggedIn?Object(s.jsx)("div",{children:Object(s.jsx)(L.GoogleLogout,{clientId:C,buttonText:"Logout",onLogoutSuccess:this.logout,onFailure:this.handleLogoutFailure})}):Object(s.jsx)("div",{children:Object(s.jsx)(L.GoogleLogin,{clientId:C,buttonText:"Login",onSuccess:this.login,onFailure:this.handleLoginFailure,cookiePolicy:"single_host_origin",responseType:"code,token"})})}}]),a}(i.a.Component),D=a(159),A=a(158),U=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={isLoggedIn:!1,accessToken:"",uniqname:sessionStorage.getItem("uniqname"),usertype:sessionStorage.getItem("user-type")},s.handleLogout=s.handleLogout.bind(Object(f.a)(s)),s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getUserInfo(this.state.uniqname).then((function(e){t.setState({usertype:e.usertype,onTeam:"team"===e.usertype}),sessionStorage.setItem("user-type",e.usertype),console.log("user data updated: ",e)}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleLogout",value:function(e){this.setState({data:e}),console.log(e),"type"in e&&"logout"===e.type&&sessionStorage.clear()}},{key:"render",value:function(){return console.log(sessionStorage),"team"===sessionStorage.getItem("user-type")?Object(s.jsxs)(D.a,{bg:"light",expand:"lg",children:[Object(s.jsx)(D.a.Brand,{href:"/view-team",children:Object(s.jsx)("img",{src:"/EECS493_landscape.png",height:"30",className:"d-inline-block align-top",alt:"EECS 493 Teams logo"})}),Object(s.jsx)(D.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(s.jsxs)(D.a.Collapse,{id:"basic-navbar-nav",children:[Object(s.jsxs)(A.a,{className:"mr-auto",children:[Object(s.jsx)(A.a.Link,{href:"/view-team",children:"My Team"}),Object(s.jsx)(A.a.Link,{href:"/see-teams",children:"All Teams"})]}),Object(s.jsx)(A.a,{children:Object(s.jsx)(A.a.Link,{className:"mr-sm-2",href:"/",children:Object(s.jsx)(M,{className:"loginButton ml-2",navbar:!0,callback:this.handleLogout})})})]})]}):"unassigned"===sessionStorage.getItem("user-type")?Object(s.jsxs)(D.a,{bg:"light",expand:"lg",children:[Object(s.jsx)(D.a.Brand,{href:"/create-team",children:Object(s.jsx)("img",{src:"/EECS493_landscape.png",height:"30",className:"d-inline-block align-top",alt:"EECS 493 Teams logo"})}),Object(s.jsx)(D.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(s.jsxs)(D.a.Collapse,{id:"basic-navbar-nav",children:[Object(s.jsxs)(A.a,{className:"mr-auto",children:[Object(s.jsx)(A.a.Link,{href:"/create-team",children:"Create Team"}),Object(s.jsx)(A.a.Link,{href:"/team-invites",children:"Team Invitations"}),Object(s.jsx)(A.a.Link,{href:"/see-teams",children:"Registered Teams"})]}),Object(s.jsx)(A.a,{children:Object(s.jsx)(A.a.Link,{className:"mr-sm-2",href:"/",children:Object(s.jsx)(M,{className:"loginButton ml-2",navbar:!0,callback:this.handleLogout})})})]})]}):"admin"===sessionStorage.getItem("user-type")?Object(s.jsxs)(D.a,{bg:"light",expand:"lg",children:[Object(s.jsx)(D.a.Brand,{href:"/admin-home",children:Object(s.jsx)("img",{src:"./EECS493-admin.png",height:"30",className:"d-inline-block align-top",alt:"EECS 493 Teams logo"})}),Object(s.jsx)(D.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(s.jsxs)(D.a.Collapse,{id:"basic-navbar-nav",children:[Object(s.jsxs)(A.a,{className:"mr-auto",children:[Object(s.jsx)(A.a.Link,{href:"/admin-home",children:"Home"}),Object(s.jsx)(A.a.Link,{href:"/admin-view",children:"Teams"})]}),Object(s.jsx)(A.a,{children:Object(s.jsx)(A.a.Link,{className:"mr-sm-2",href:"/",children:Object(s.jsx)(M,{className:"loginButton ml-2",navbar:!0,callback:this.handleLogout})})})]})]}):Object(s.jsx)("br",{})}}]),a}(i.a.Component),H=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={teamName:"",redi:!1,uniq1:sessionStorage.getItem("uniqname"),uniq2:"",uniq3:"",uniq4:"",description:"",show:!1,show2:!1,uniqname:sessionStorage.getItem("uniqname"),usertype:sessionStorage.getItem("user-type"),onTeam:!1},s.updateInput=s.updateInput.bind(Object(f.a)(s)),s.addTeam=s.addTeam.bind(Object(f.a)(s)),s.sendData=s.sendData.bind(Object(f.a)(s)),s.handleShow=s.handleShow.bind(Object(f.a)(s)),s.handleHide=s.handleHide.bind(Object(f.a)(s)),s.handleSecondHide=s.handleSecondHide.bind(Object(f.a)(s)),s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getUserInfo(this.state.uniqname).then((function(e){t.setState({usertype:e.usertype,onTeam:"team"===e.usertype}),sessionStorage.setItem("user-type",e.usertype),console.log("user data updated: ",e)}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendData",value:function(){var e=Object(g.a)(p.a.mark((function e(t,a,s){var n,i,c,r,o=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=h.firestore()).settings({timestampsInSnapshots:!0}),c=!1,r="",e.t0=t,e.next=1===e.t0?7:2===e.t0?12:3===e.t0?14:4===e.t0?16:18;break;case 7:return i=this.state.uniq1,c=!0,r=a,n.collection("users").doc(i).update({onTeam:c,teamName:r}),e.abrupt("break",18);case 12:return i=this.state.uniq2,e.abrupt("break",18);case 14:return i=this.state.uniq3,e.abrupt("break",18);case 16:return i=this.state.uniq4,e.abrupt("break",18);case 18:O.getUserInfo(i).then((function(e){var t=e.invitations,s=e.numInvitations;t.push(a),i!==o.state.uniq1&&n.collection("users").doc(i).update({invitations:t,numInvitations:s+1,onTeam:c})}));case 19:case"end":return e.stop()}}),e,this)})));return function(t,a,s){return e.apply(this,arguments)}}()},{key:"updateInput",value:function(e){this.setState(Object(j.a)({},e.target.name,e.target.value))}},{key:"addTeam",value:function(e){var t=this;e.preventDefault();var a=h.firestore();a.settings({timestampsInSnapshots:!0});var s,n=this.state.teamName.split(" ").join("");s=""===this.state.uniq4?"":this.state.uniq4,O.getUserInfo(this.state.uniq1).then((function(e){!0!==e.onTeam?"error"!==e?O.getUserInfo(t.state.uniq2).then((function(e){!0!==e.onTeam?"error"!==e?O.getUserInfo(t.state.uniq3).then((function(e){!0!==e.onTeam?"error"!==e?""!==t.state.uniq4?O.getUserInfo(t.state.uniq4).then((function(e){!0!==e.onTeam?"error"!==e?(t.sendData(1,n),t.sendData(2,n),t.sendData(3,n),t.sendData(4,n),a.collection("teams").doc(n).set({teamName:n,uniqname1:t.state.uniq1,uniqname2:t.state.uniq2,uniqname3:t.state.uniq3,uniqname4:s,uniqname1Accepted:!0,uniqname2Accepted:!1,uniqname3Accepted:!1,uniqname4Accepted:!1,description:t.state.description,rejectedInvites:[]}).then((function(){O.getUserInfo(t.state.uniqname).then((function(e){t.setState({usertype:e.usertype,onTeam:"team"===e.usertype}),sessionStorage.setItem("user-type",e.usertype),console.log("user data updated: ",e)})),t.setState({show2:!0})}))):alert(t.state.uniq4+" is not a registered uniqname in the class. Please enter a different uniqname"):alert(t.state.uniq4+" is already on a team. Please enter a different uniqname")})):(t.sendData(1,n),t.sendData(2,n),t.sendData(3,n),a.collection("teams").doc(n).set({teamName:n,uniqname1:t.state.uniq1,uniqname2:t.state.uniq2,uniqname3:t.state.uniq3,uniqname4:s,uniqname1Accepted:!0,uniqname2Accepted:!1,uniqname3Accepted:!1,uniqname4Accepted:!1,description:t.state.description,rejectedInvites:[]}).then((function(){O.getUserInfo(t.state.uniqname).then((function(e){t.setState({usertype:e.usertype,onTeam:"team"===e.usertype}),sessionStorage.setItem("user-type",e.usertype),console.log("user data updated: ",e)})),t.setState({show2:!0})}))):alert(t.state.uniq3+" is not a registered uniqname in the class. Please enter a different uniqname"):alert(t.state.uniq3+" is already on a team. Please enter a different uniqname")})):alert(t.state.uniq2+" is not a registered uniqname in the class. Please enter a different uniqname"):alert(t.state.uniq2+" is already on a team. Please enter a different uniqname")})):alert(t.state.uniq1+" is not a registered uniqname in the class. Please enter a different uniqname"):alert(t.state.uniq1+" is already on a team. Please enter a different uniqname")}))}},{key:"handleShow",value:function(e){e.preventDefault(),console.log("made it here"),this.setState({show:!0})}},{key:"handleHide",value:function(){this.setState({show:!1})}},{key:"handleSecondHide",value:function(){this.setState({redi:!0,show2:!1})}},{key:"render",value:function(){return!0===this.state.redi&&"team"===sessionStorage.getItem("user-type")?(this.setState({onTeam:!0}),Object(s.jsx)(S.a,{to:"/view-team"})):"admin"===this.state.usertype?Object(s.jsx)(S.a,{to:"/admin-home"}):sessionStorage.getItem("uniqname")?(console.log(this.state),Object(s.jsxs)("div",{className:"createteam",children:[Object(s.jsx)(U,{}),Object(s.jsx)("header",{className:"loggedInHeader",children:Object(s.jsxs)("div",{className:"body",children:[Object(s.jsx)("h1",{className:"title",children:"Register your team"}),Object(s.jsxs)("div",{className:"body-content",children:[Object(s.jsxs)(x.a,{className:"text-left",onSubmit:this.handleShow,children:[Object(s.jsxs)(x.a.Group,{controlId:"fullname",children:[Object(s.jsx)(x.a.Label,{children:"Team name*"}),Object(s.jsx)(x.a.Control,{required:!0,type:"text",name:"teamName",placeholder:"",onChange:this.updateInput,value:this.state.teamName})]}),Object(s.jsxs)(x.a.Group,{controlId:"uniq1",children:[Object(s.jsx)(x.a.Label,{children:"Uniqname 1*"}),Object(s.jsx)(x.a.Control,{disabled:!0,type:"text",name:"uniq1",placeholder:this.state.uniqname,defaultValue:this.state.uniqname})]}),Object(s.jsxs)(x.a.Group,{controlId:"uniq1",children:[Object(s.jsx)(x.a.Label,{children:"Uniqname 2*"}),Object(s.jsx)(x.a.Control,{required:!0,type:"text",name:"uniq2",placeholder:"",onChange:this.updateInput,value:this.state.uniq2})]}),Object(s.jsxs)(x.a.Group,{controlId:"uniq1",children:[Object(s.jsx)(x.a.Label,{children:"Uniqname 3*"}),Object(s.jsx)(x.a.Control,{required:!0,type:"text",name:"uniq3",placeholder:"",onChange:this.updateInput,value:this.state.uniq3})]}),Object(s.jsxs)(x.a.Group,{controlId:"uniq1",children:[Object(s.jsx)(x.a.Label,{children:"Uniqname 4*"}),Object(s.jsx)(x.a.Control,{type:"text",name:"uniq4",placeholder:"",onChange:this.updateInput,value:this.state.uniq4})]}),Object(s.jsxs)(x.a.Group,{controlId:"uniq1",children:[Object(s.jsx)(x.a.Label,{children:"Project Description"}),Object(s.jsx)(x.a.Control,{type:"textarea",size:"lg",name:"description",placeholder:"",onChange:this.updateInput,value:this.state.description}),Object(s.jsx)(x.a.Text,{id:"passwordHelpBlock",muted:!0,children:"You can do this later too!"})]}),Object(s.jsx)("br",{}),Object(s.jsx)(v.a,{variant:"primary",type:"submit",children:"Submit"})]}),Object(s.jsxs)(y.a,{show:this.state.show,onHide:this.handleHide,children:[Object(s.jsx)(y.a.Header,{closeButton:!0,children:Object(s.jsx)(y.a.Title,{children:"Do you want to create this team?"})}),Object(s.jsxs)(y.a.Body,{children:[Object(s.jsx)("h2",{children:this.state.teamName}),Object(s.jsx)("p",{children:this.state.uniq1}),Object(s.jsx)("p",{children:this.state.uniq2}),Object(s.jsx)("p",{children:this.state.uniq3}),Object(s.jsx)("p",{children:this.state.uniq4})]}),Object(s.jsxs)(y.a.Footer,{children:[Object(s.jsx)(v.a,{variant:"secondary",onClick:this.handleHide,children:"Cancel"}),Object(s.jsx)(v.a,{variant:"success",onClick:this.addTeam,children:"Create Team"})]})]}),Object(s.jsxs)(y.a,{show:this.state.show2,onHide:this.handleHide,children:[Object(s.jsx)(y.a.Header,{closeButton:!0,children:Object(s.jsx)(y.a.Title,{children:"Success!"})}),Object(s.jsxs)(y.a.Body,{children:[Object(s.jsx)("h2",{children:"Please ask these team members to log into 493teams and accept this team invitation:"}),Object(s.jsx)("p",{children:this.state.uniq1}),Object(s.jsx)("p",{children:this.state.uniq2}),Object(s.jsx)("p",{children:this.state.uniq3}),Object(s.jsx)("p",{children:this.state.uniq4})]}),Object(s.jsx)(y.a.Footer,{children:Object(s.jsx)(v.a,{variant:"success",onClick:this.handleSecondHide,children:"Create Team"})})]})]})]})})]})):Object(s.jsx)(S.a,{to:"/"})}}]),a}(i.a.Component),F=a(150),B=a(103),R=a(151),P=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),s=t.call(this,e),console.log("props",e),s.state={teams:[],userdata:e.location,uniqname:sessionStorage.getItem("uniqname"),usertype:sessionStorage.getItem("user-type"),teamName:"",onTeam:"team"===sessionStorage.getItem("user-type"),dataLoaded:!1,edited:!1},s.editDesc=s.editDesc.bind(Object(f.a)(s)),s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getUserInfo(this.state.uniqname).then((function(e){t.setState({usertype:e.usertype,onTeam:"team"===e.usertype}),sessionStorage.setItem("user-type",e.usertype),console.log("user data updated: ",e)}));case 2:if("team"!==sessionStorage.getItem("user-type")){e.next=8;break}return h.firestore().settings({timestampsInSnapshots:!0}),console.log("state",this.state.uniqname),e.next=8,O.getTeamFromUser(this.state.uniqname).then((function(e){t.setState({teams:e,dataLoaded:!0}),console.log("team data loaded: ",e)}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"editDesc",value:function(e){e.preventDefault();var t=prompt("What do you want to change your project description to?");if(0!==t.length){var a=h.firestore();a.settings({timestampsInSnapshots:!0}),a.collection("teams").doc(this.state.teams.teamName).update({description:t});var s=this.state.teams;s.description=t,this.setState({teams:s})}}},{key:"render",value:function(){if(!this.state.uniqname)return Object(s.jsx)(S.a,{to:"/"});if(!this.state.onTeam)return Object(s.jsx)(S.a,{to:"/create-team"});console.log(this.state.usertype);var e=!0===this.state.dataLoaded&&this.state.onTeam;return console.log("loaded: ",e),Object(s.jsxs)("div",{className:"viewteam",children:[Object(s.jsx)(U,{}),Object(s.jsx)("header",{className:"loggedInHeader",children:Object(s.jsxs)("div",{className:"body",children:[Object(s.jsxs)("h1",{className:"title mb-3",children:["Your Current Team:  ",this.state.dataLoaded&&Object(s.jsxs)("i",{className:"text-secondary",children:[" ",this.state.teams.teamName]})]}),Object(s.jsxs)("div",{className:" w-100",children:[Object(s.jsx)("p",{children:this.state.dataLoaded?Object(s.jsx)("div",{className:"container w-100",children:Object(s.jsxs)(F.a,{id:"team_info",className:"row w-100",children:[Object(s.jsx)(B.a,{id:"info_table",md:6,xs:12,className:"col-6 w-100 ml-0 pl-0",children:Object(s.jsxs)(R.a,{striped:!0,bordered:!0,className:"w-100 ml-0 text-left",children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{className:"text-left",children:"Uniqname"}),Object(s.jsx)("th",{className:"text-left",children:"Status"})]})}),Object(s.jsxs)("tbody",{children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:this.state.teams.uniqname1}),Object(s.jsx)("td",{children:this.state.teams.uniqname1Accepted?"accepted":"pending"})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:this.state.teams.uniqname2}),Object(s.jsx)("td",{children:this.state.teams.uniqname2Accepted?"accepted":"pending"})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:this.state.teams.uniqname3}),Object(s.jsx)("td",{children:this.state.teams.uniqname3Accepted?"accepted":"pending"})]}),""===this.state.teams.uniqname4?Object(s.jsx)("br",{}):Object(s.jsx)(i.a.Fragment,{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:this.state.teams.uniqname4}),Object(s.jsx)("td",{children:this.state.teams.uniqname4Accepted?"accepted":"pending"})]})})]})]})}),Object(s.jsxs)(B.a,{md:6,xs:12,className:"col-x4 offset-xs-8 w-100 ml-0 pl-0",children:[Object(s.jsxs)(R.a,{bordered:!0,striped:!0,children:[Object(s.jsx)("thead",{children:Object(s.jsx)("tr",{children:Object(s.jsx)("th",{colSpan:"4",className:"text-left",children:"Description "})})}),Object(s.jsx)("tbody",{children:Object(s.jsx)("tr",{children:Object(s.jsxs)("td",{colSpan:"2",className:"pb-1 text-left",children:[this.state.teams.description," ",Object(s.jsx)(v.a,{id:"editDescription",variant:"outline-success",className:"float-right ",size:"sm",onClick:this.editDesc,children:"Edit"})]})})})]}),Object(s.jsxs)(R.a,{bordered:!0,striped:!0,children:[Object(s.jsx)("thead",{children:Object(s.jsx)("tr",{children:Object(s.jsx)("th",{className:"text-left",colSpan:"4",children:"Rejected Invitations"})})}),Object(s.jsx)("tbody",{children:Object(s.jsx)("tr",{children:Object(s.jsx)("td",{colSpan:"4",className:"text-left",children:this.state.teams.rejectedInvites&&0!==this.state.teams.rejectedInvites.length?this.state.teams.rejectedInvites.join(", "):Object(s.jsx)("i",{className:"text-secondary",children:"No rejected invitations"})})})})]})]})]})}):Object(s.jsx)("i",{children:"Loading..."})}),Object(s.jsx)("br",{})]})]})})]})}}]),a}(i.a.Component),V=a(161),z=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={uniqname:sessionStorage.getItem("uniqname"),usertype:sessionStorage.getItem("user-type"),onTeam:!1,teams:{},data:e,dataLoaded:!1,doneEditing:!1,teamName:e.teamName},s.editTeam=s.editTeam.bind(Object(f.a)(s)),s.deleteTeam=s.deleteTeam.bind(Object(f.a)(s)),s.editTeamName=s.editTeamName.bind(Object(f.a)(s)),s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("check props ",this.state.data),h.firestore().settings({timestampsInSnapshots:!0}),this.props.onTeam&&O.getTeamInfo(this.props.team).then((function(e){console.log("data from get team info: ",e),t.setState({teams:e,dataLoaded:!0})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"editTeamName",value:function(){var e=Object(g.a)(p.a.mark((function e(t){var a,s,n=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=(a=prompt("What do you want to change "+t.target.id+" to?")).split(" ").join(""),console.log(a),(s=h.firestore()).settings({timestampsInSnapshots:!0}),0!==a.length&&O.getTeamInfo(this.state.teams.teamName).then((function(e){var t;t=""===e.description?"":e.description,s.collection("teams").doc(a).set({teamName:a,uniqname1:e.uniqname1,uniqname2:e.uniqname2,uniqname3:e.uniqname3,uniqname4:e.uniqname4,uniqname1Accepted:e.uniqname1Accepted,uniqname2Accepted:e.uniqname2Accepted,uniqname3Accepted:e.uniqname3Accepted,uniqname4Accepted:e.uniqname4Accepted,description:t,rejectedInvites:e.rejectedInvites}),console.log("created New team"),console.log("updating user1"),e.uniqname1Accepted?(s.collection("users").doc(e.uniqname1).update({teamName:a}),console.log("updated user1")):O.getUserInfo(e.uniqname1).then((function(t){var i=t.invitations,c=i.indexOf(n.state.teams.teamName);console.log("PERSON 1 INDEX"+c),-1!==c&&(i[c]=a),s.collection("users").doc(e.uniqname1).update({invitations:i}),console.log("updated user1")})),console.log("updating user2"),!0===e.uniqname2Accepted?(s.collection("users").doc(e.uniqname2).update({teamName:a}),console.log("updated userInfo2")):O.getUserInfo(e.uniqname2).then((function(t){var i=t.invitations,c=i.indexOf(n.state.teams.teamName);console.log("PERSON 2 INDEX"+c),-1!==c&&(i[c]=a),s.collection("users").doc(e.uniqname2).update({invitations:i}),console.log("updated userInfo2")})),console.log("updating user3"),!0===e.uniqname2Accepted?(s.collection("users").doc(e.uniqname3).update({teamName:a}),console.log("updated userInfo3")):O.getUserInfo(e.uniqname3).then((function(t){var i=t.invitations,c=i.indexOf(n.state.teams.teamName);console.log(n.state.teams.teamName),console.log("PERSON 3 ARRAY"+i),console.log("PERSON 3 INDEX"+c),-1!==c&&(i[c]=a),s.collection("users").doc(e.uniqname3).update({invitations:i}),console.log("updated user3")})),console.log("updating user4"),!0===e.uniqname4Accepted&&""!==e.uniqname4?(s.collection("users").doc(e.uniqname4).update({teamName:a}),console.log("updated user4")):""!==e.uniqname4&&O.getUserInfo(e.uniqname4).then((function(t){var i=t.invitations,c=i.indexOf(n.state.teams.teamName);console.log(n.state.teams.teamName),console.log("PERSON 4 ARRAY"+i),console.log("PERSON 4 INDEX"+c),-1!==c&&(i[c]=a),s.collection("users").doc(e.uniqname4).update({invitations:i}),console.log("updated user4")})),s.collection("teams").doc(n.props.team).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)})),O.getTeamInfo(a).then((function(e){console.log(e),n.setState({teams:e}),n.setState({dataLoaded:!0})}))}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editTeam",value:function(e){var t=this;e.preventDefault();var a=prompt("What do you want to change "+e.target.id+" to?");console.log(a);var s=h.firestore();s.settings({timestampsInSnapshots:!0}),"teamName"!==e.target.id&&(console.log("made it in here"),O.getUserInfo(a).then((function(n){if(!0===n.onTeam)alert("User already on team enter a different uniqname");else{var i,c,r;switch(s.collection("users").doc(a).update({onTeam:!0,teamName:t.state.teams.teamName}),e.target.id){case"uniqname1":c=t.state.teams.uniqname1,r="uniqname1Accepted";break;case"uniqname2":c=t.state.teams.uniqname2,r="uniqname4Accepted";break;case"uniqname3":c=t.state.teams.uniqname3,r="uniqname4Accepted";break;case"uniqname4":c=t.state.teams.uniqname4,r="uniqname4Accepted"}s.collection("users").doc(c).update({onTeam:!1,teamName:""}),s.collection("teams").doc(t.state.teams.teamName).update((i={},Object(j.a)(i,e.target.id,a),Object(j.a)(i,r,!0),i)),O.getTeamInfo(t.props.team).then((function(e){console.log(e),t.setState({teams:e}),t.setState({dataLoaded:!0})}))}})))}},{key:"deleteTeam",value:function(e){var t=this;e.preventDefault();var a=h.firestore();a.settings({timestampsInSnapshots:!0}),O.getUserInfo(this.state.teams.uniqname1).then((function(e){if(e.onTeam&&e.teamName!==t.props.team){var s=e.invitations,n=s.indexOf(t.props.team);n>-1&&s.splice(n,1);var i=e.numInvitations-1;a.collection("users").doc(t.state.teams.uniqname1).update({onTeam:!1,teamName:"",invitations:s,numInvitations:i})}else{var c=e.invitations,r=c.indexOf(t.props.team);r>-1&&c.splice(r,1);var o=e.numInvitations-1;a.collection("users").doc(t.state.teams.uniqname1).update({onTeam:!0,teamName:"",invitations:c,numInvitations:o})}})),O.getUserInfo(this.state.teams.uniqname2).then((function(e){if(e.onTeam&&e.teamName!==t.props.team){var s=e.invitations,n=s.indexOf(t.props.team);n>-1&&s.splice(n,1);var i=e.numInvitations-1;a.collection("users").doc(t.state.teams.uniqname2).update({invitations:s,numInvitations:i})}else{var c=e.invitations,r=c.indexOf(t.props.team);r>-1&&c.splice(r,1);var o=e.numInvitations-1;a.collection("users").doc(t.state.teams.uniqname2).update({onTeam:!1,teamName:"",invitations:c,numInvitations:o})}})),O.getUserInfo(this.state.teams.uniqname3).then((function(e){if(e.onTeam&&e.teamName!==t.props.team){var s=e.invitations,n=s.indexOf(t.props.team);n>-1&&s.splice(n,1);var i=e.numInvitations-1;a.collection("users").doc(t.state.teams.uniqname3).update({onTeam:!1,teamName:"",invitations:s,numInvitations:i})}else{var c=e.invitations,r=c.indexOf(t.props.team);r>-1&&c.splice(r,1);var o=e.numInvitations-1;a.collection("users").doc(t.state.teams.uniqname3).update({onTeam:!1,teamName:"",invitations:c,numInvitations:o})}})),O.getUserInfo(this.state.teams.uniqname4).then((function(e){if(e.onTeam&&e.teamName!==t.props.team){var s=e.invitations,n=s.indexOf(t.props.team);n>-1&&s.splice(n,1);var i=e.numInvitations-1;a.collection("users").doc(t.state.teams.uniqname4).update({onTeam:!1,teamName:"",invitations:s,numInvitations:i})}else{var c=e.invitations,r=c.indexOf(t.props.team);r>-1&&c.splice(r,1);var o=e.numInvitations-1;a.collection("users").doc(t.state.teams.uniqname4).update({onTeam:!1,teamName:"",invitations:c,numInvitations:o})}})),a.collection("teams").doc(this.props.team).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)})),this.setState({doneEditing:!0})}},{key:"render",value:function(){if(!0===this.state.doneEditing)return Object(s.jsx)("h2",{children:"Team Deleted Successfully"});if(!0===this.state.dataLoaded){var e=this.state.teams;return console.log(this.state.teams),console.log("made it here"),Object(s.jsxs)(V.a,{className:"shadow-sm rounded-1 align-items-center",children:[Object(s.jsx)(v.a,{variant:"danger mr-4 mt-3 align-self-end",size:"sm",onClick:this.deleteTeam,children:"Delete Team"}),Object(s.jsxs)(R.a,{className:"m-4 text-left team-admin-table",xs:"auto",children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{className:"small",children:"Team Name"}),Object(s.jsx)("th",{colSpan:"2",children:e.teamName}),Object(s.jsx)("th",{className:"disappear-on-mobile",children:Object(s.jsx)(v.a,{id:"teamName",variant:"outline-success",size:"sm",onClick:this.editTeamName,children:"Edit"})})]})}),Object(s.jsxs)("tbody",{children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{className:"small",children:"Member #1"}),Object(s.jsx)("td",{colSpan:"2",children:e.uniqname1}),Object(s.jsx)("td",{className:"disappear-on-mobile",children:Object(s.jsx)(v.a,{id:"uniqname1",variant:"outline-success",size:"sm",onClick:this.editTeam,children:"Edit"})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{className:"small",children:"Member #2"}),Object(s.jsx)("td",{colSpan:"2",children:e.uniqname2}),Object(s.jsx)("td",{className:"disappear-on-mobile",children:Object(s.jsx)(v.a,{id:"uniqname2 ",variant:"outline-success",size:"sm",onClick:this.editTeam,children:"Edit"})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{className:"small",children:"Member #3"}),Object(s.jsx)("td",{colSpan:"2",children:e.uniqname3}),Object(s.jsx)("td",{className:"disappear-on-mobile",children:Object(s.jsx)(v.a,{id:"uniqname3",variant:"outline-success",size:"sm",onClick:this.editTeam,children:"Edit"})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{className:"small",children:"Member #4"}),Object(s.jsx)("td",{colSpan:"2",children:e.uniqname4}),Object(s.jsx)("td",{className:"disappear-on-mobile",children:Object(s.jsx)(v.a,{id:"uniqname4",variant:"outline-success",size:"sm",onClick:this.editTeam,children:"Edit"})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{className:"small",children:"Description"}),Object(s.jsx)("td",{colSpan:"3",children:e.description})]})]})]})]})}return Object(s.jsx)("p",{children:"Loading..."})}}]),a}(i.a.Component),_=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={invitation:"",teamMems:[],dataLoaded:!1,accepted:!1,show:!1,userInf:{}},s.viewInvitation=s.viewInvitation.bind(Object(f.a)(s)),s.handleShow=s.handleShow.bind(Object(f.a)(s)),s.handleHide=s.handleHide.bind(Object(f.a)(s)),s.acceptedTeam=s.acceptedTeam.bind(Object(f.a)(s)),s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t,a,s,n,i,c,r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.firestore().settings({timestampsInSnapshots:!0}),e.next=4,O.getUserInfo(sessionStorage.getItem("uniqname"));case 4:return t=e.sent,e.next=7,t.invitations[this.props.invNum];case 7:return a=e.sent,console.log("loading invitation at: ",t),this.setState({invitation:a}),this.setState({userInf:t}),e.next=13,O.getTeamInfo(this.state.invitation);case 13:s=e.sent,n=[],i=s.uniqname1,c=s.uniqname2,r=s.uniqname3,n.push(i),n.push(c),n.push(r);try{o=s.uniqname4,n.push(o)}catch(l){console.log(l)}this.setState({teamMems:n}),this.setState({dataLoaded:!0});case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"viewInvitation",value:function(){return!1===this.state.dataLoaded?Object(s.jsx)("h2",{children:"Loading..."}):Object(s.jsx)(V.a,{children:Object(s.jsxs)(V.a.Body,{children:[Object(s.jsx)(V.a.Title,{children:this.state.invitation}),Object(s.jsx)(V.a.Text,{children:this.state.teamMems.join(", ")}),Object(s.jsx)(v.a,{variant:"success",onClick:this.handleShow,children:"Join Team"})]})})}},{key:"handleShow",value:function(){console.log("made it here"),this.setState({show:!0})}},{key:"handleHide",value:function(){this.setState({show:!1})}},{key:"acceptedTeam",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t,a,s,n,i,c,r=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=h.firestore()).settings({timestampsInSnapshots:!0}),a=this.state.teamMems[0],s=this.state.teamMems[1],n=this.state.teamMems[2],4===this.state.teamMems.length&&(i=this.state.teamMems[3]),c=sessionStorage.getItem("uniqname"),console.log(c),e.t0=c,e.next=e.t0===a?11:e.t0===s?13:e.t0===n?15:e.t0===i?17:19;break;case 11:return t.collection("teams").doc(this.state.invitation).update({uniqname1Accepted:!0}),e.abrupt("break",19);case 13:return t.collection("teams").doc(this.state.invitation).update({uniqname2Accepted:!0}),e.abrupt("break",19);case 15:return t.collection("teams").doc(this.state.invitation).update({uniqname3Accepted:!0}),e.abrupt("break",19);case 17:return t.collection("teams").doc(this.state.invitation).update({uniqname4Accepted:!0}),e.abrupt("break",19);case 19:this.state.userInf.invitations.forEach((function(e,a){a!==r.props.invNum&&O.getTeamInfo(e).then((function(a){console.log(a),console.log("ready to push"),a.rejectedInvites.push(sessionStorage.getItem("uniqname")),t.collection("teams").doc(e).update({rejectedInvites:a.rejectedInvites})}))})),t.collection("users").doc(sessionStorage.getItem("uniqname")).update({onTeam:!0,teamName:this.state.invitation,numInvitations:0,invitations:[]}).then((function(){r.setState({accepted:!0})}));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return!0===this.state.accepted?(sessionStorage.setItem("user-type","team"),console.log("moving from invitation to view-team"),Object(s.jsx)(S.a,{to:"/view-team"})):Object(s.jsxs)("div",{className:"Invite",children:[this.viewInvitation(),Object(s.jsxs)(y.a,{show:this.state.show,onHide:this.handleHide,children:[Object(s.jsx)(y.a.Header,{closeButton:!0,children:Object(s.jsx)(y.a.Title,{children:"Do you want to accept this team Invitation?"})}),Object(s.jsxs)(y.a.Body,{children:[Object(s.jsx)("h2",{children:this.state.invitation}),Object(s.jsx)("p",{children:this.state.teamMems.join(", ")})]}),Object(s.jsxs)(y.a.Footer,{children:[Object(s.jsx)(v.a,{variant:"secondary",onClick:this.handleHide,children:"Cancel"}),Object(s.jsx)(v.a,{variant:"success",onClick:this.acceptedTeam,children:"Accept Invitation"})]})]}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{})]})}}]),a}(i.a.Component),G=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={numInv:0,uniqname:sessionStorage.getItem("uniqname"),usertype:sessionStorage.getItem("user-type"),dataLoaded:!1,onTeam:!1},s.renderInvitations=s.renderInvitations.bind(Object(f.a)(s)),s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("uniqname",this.state.uniqname),h.firestore().settings({timestampsInSnapshots:!0}),e.next=5,O.getUserInfo(this.state.uniqname).then((function(e){console.log("result",e),sessionStorage.setItem("user-type",e.usertype),t.setState(Object(j.a)({usertype:e.usertype,onTeam:"team"===e.usertype,numInv:e.numInvitations},"onTeam",e.onTeam)),e.onTeam&&sessionStorage.setItem("user-type","team")}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderInvitations",value:function(){var e=Array.from(Array(this.state.numInv)).map((function(e,t){return Object(s.jsx)(_,{invNum:t})}));return console.log(e),e}},{key:"render",value:function(){return sessionStorage.getItem("uniqname")?"team"===this.state.usertype?Object(s.jsx)(S.a,{to:"/view-team"}):"admin"===this.state.usertype?Object(s.jsx)(S.a,{to:"/admin-home"}):Object(s.jsxs)("div",{className:"Home",children:[Object(s.jsx)(U,{}),Object(s.jsx)("header",{className:"App-header",children:Object(s.jsxs)("div",{className:"body",children:[Object(s.jsx)("h1",{className:"title",children:"493 Team Invitations "}),Object(s.jsxs)("div",{className:"body-content",children:[Object(s.jsxs)("h2",{children:["You have (",this.state.numInv,") invitations"]}),this.renderInvitations(),Object(s.jsx)("br",{})]})]})})]}):Object(s.jsx)(S.a,{to:"/"})}}]),a}(i.a.Component),Y=a(153),W=a(152),J=a(104),X=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={userData:[],displayErrorMessage:!1,errorMessage:"",finishedUpload:!1,showButton:!1},s.handleOnDrop=s.handleOnDrop.bind(Object(f.a)(s)),s.handleOnError=s.handleOnError.bind(Object(f.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(f.a)(s)),s.handleOnRemoveFile=s.handleOnRemoveFile.bind(Object(f.a)(s)),s}return Object(l.a)(a,[{key:"handleOnDrop",value:function(e){if(console.log("dropped: ",e),!e||e.length<2)this.setState({displayErrorMessage:!0,errorMessage:"The file you uploaded is empty"});else{var t=e[0].data;console.log(t),2===t.length&&"uniqname"===t[0]&&"isAdmin"===t[1]?this.setState({userData:e.slice(1),showButton:!0}):this.setState({displayErrorMessage:!0,errorMessage:"The file you uploaded does not contain the proper headers"})}}},{key:"handleOnRemoveFile",value:function(e){this.setState({showButton:!1,displayErrorMessage:!1,errorMessage:""})}},{key:"handleOnError",value:function(e){console.log("error: ",e)}},{key:"handleSubmit",value:function(){var e=Object(g.a)(p.a.mark((function e(t){var a,s=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=h.firestore()).settings({timestampsInSnapshots:!0}),t.preventDefault(),console.log(this.state.userData),!this.state.userData){e.next=9;break}this.state.userData.forEach((function(e){""!==e.data[0]&&O.getUserInfo(e.data[0]).then((function(t){if("error"!==t){s.setState({displayErrorMessage:!0,errorMessage:"Some users are already in the database. Skipping..."})}else{var n={uniqname:e.data[0],invitations:[],isAdmin:Boolean(e.data[1]),numInvitations:0,onTeam:!1,teamName:""};a.collection("users").doc(e.data[0]).set(n)}}))})),this.setState({finishedUpload:!0}),e.next=11;break;case 9:return this.setState({displayErrorMessage:!0,errorMessage:"The file you uploaded is empty"}),e.abrupt("return");case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.showButton;return Object(s.jsxs)(i.a.Fragment,{as:"div",className:"mb-2 mh-90",children:[this.state.displayErrorMessage&&Object(s.jsx)(F.a,{className:"w-100 align-items-center m-2",children:Object(s.jsx)(B.a,{className:"col-md-8 offset-md-2 w-100",children:Object(s.jsx)(W.a,{style:{"font-size":14},variant:"danger",className:"w-100 small",onClose:function(){return e.setState({displayErrorMessage:!1,errorMessage:""})},dismissible:!0,children:this.state.errorMessage})})}),this.state.finishedUpload&&Object(s.jsx)(F.a,{className:"w-100 align-items-center m-2",children:Object(s.jsx)(B.a,{className:"col-md-8 offset-md-2 w-100",children:Object(s.jsx)(W.a,{style:{"font-size":14},variant:"success",className:"w-100 small",dismissible:!0,children:"Roster successfully uploaded! You may exit out now"})})}),Object(s.jsx)(J.a,{onDrop:this.handleOnDrop,onError:this.handleOnError,addRemoveButton:!0,onRemoveFile:this.handleOnRemoveFile,className:"h-80",children:Object(s.jsx)("span",{children:"Upload a CSV of users"})}),t&&Object(s.jsx)(v.a,{className:"w-100 mb-2",variant:"success",onClick:this.handleSubmit,children:"Upload"})]})}}]),a}(i.a.Component),K=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={show1:!1,word:""},s.handleShow=s.handleShow.bind(Object(f.a)(s)),s.handleInput=s.handleInput.bind(Object(f.a)(s)),s}return Object(l.a)(a,[{key:"handleInput",value:function(e){this.setState(Object(j.a)({},e.target.name,e.target.value))}},{key:"handleShow",value:function(){this.setState({show1:!0})}},{key:"handleHide",value:function(){}},{key:"render",value:function(){return Object(s.jsxs)(i.a.Fragment,{children:[Object(s.jsxs)(y.a.Body,{as:"div",className:"mb-2",children:[Object(s.jsxs)(Y.a,{className:"justify-content-md-center mb-3",children:[Object(s.jsx)(V.a,{bg:"info",className:"cardclass",children:Object(s.jsxs)(V.a.Body,{className:"text-light",children:[Object(s.jsx)(V.a.Title,{children:"Step 1"}),Object(s.jsxs)(V.a.Text,{children:['Create a roster of users by uploading a CSV. The columns should be "uniqname" (string UMich uniqnames) and "isAdmin" (boolean). Mark isAdmin as false for all students, and as true for all staff',Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),"Add users later via the firebase console."]})]})}),Object(s.jsx)(V.a,{bg:"primary",className:"cardclass",children:Object(s.jsxs)(V.a.Body,{className:"text-light",children:[Object(s.jsx)(V.a.Title,{children:"Step 2"}),Object(s.jsx)(V.a.Text,{children:"Create a spreadsheet available to unassigned/no-team students for them to list their interests in projects, potential team members, and contact information. Instruct students to log into EECS 493 Teams to register once they have found their team."})]})}),Object(s.jsx)(V.a,{bg:"success",className:"cardclass",children:Object(s.jsxs)(V.a.Body,{className:"text-light",children:[Object(s.jsx)(V.a.Title,{children:"Step 3"}),Object(s.jsx)(V.a.Text,{children:"Use EECS 493 Teams to easily see specific teams, download full updated team rosters, limit last-minute student team changes without staff approval, and generate unassigned student lists."})]})})]}),Object(s.jsxs)(F.a,{className:"h-90",children:[Object(s.jsx)(B.a,{className:"w-50",children:Object(s.jsx)(X,{})}),Object(s.jsx)("br",{})]})]}),Object(s.jsx)(y.a.Footer,{className:"mt-6",children:Object(s.jsx)("i",{children:"The EECS 493 Teams recommends considering the addition of other useful features to this MVP, such as the ability to denote specific Zoom links, sign up for virtual presentation slots, and more."})})]})}}]),a}(i.a.Component),Z=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={show1:!1,word:""},s.handleDelete=s.handleDelete.bind(Object(f.a)(s)),s.handleShow=s.handleShow.bind(Object(f.a)(s)),s.handleInput=s.handleInput.bind(Object(f.a)(s)),s.handleHide=s.handleHide.bind(Object(f.a)(s)),s}return Object(l.a)(a,[{key:"handleInput",value:function(e){this.setState(Object(j.a)({},e.target.name,e.target.value))}},{key:"handleShow",value:function(){this.setState({show1:!0})}},{key:"handleHide",value:function(){this.setState({show1:!1})}},{key:"handleDelete",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("reset"!==this.state.word){e.next=14;break}return(t=h.firestore()).settings({timestampsInSnapshots:!0}),e.next=5,t.collection("teams").get().then((function(e){e.forEach((function(e){e.ref.delete().then((function(){console.log("successfully deleted team")}))}))}));case 5:return e.next=7,t.collection("users").where("isAdmin","==",!1).get().then((function(e){e.forEach((function(e){e.ref.delete().then((function(){console.log("successfully deleted user")}))}))}));case 7:return e.next=9,t.collection("users").where("isAdmin","==",!0).get().then((function(e){e.forEach((function(e){e.ref.update({onTeam:!1,numInvitations:0,invitations:[]}).then((function(){console.log("successfully cleared admin's info")}))}))}));case 9:console.log("finished deleting"),alert("Database successfully reset"),this.setState({show1:!1}),e.next=16;break;case 14:alert("Word entered incorrectly. Database not reset"),this.setState({show1:!1});case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(s.jsxs)(i.a.Fragment,{children:[Object(s.jsxs)(y.a,{show:this.state.show1,onHide:this.handleHide,children:[Object(s.jsx)(y.a.Header,{closeButton:!0,children:Object(s.jsx)(y.a.Title,{children:"Are you sure you want to reset the database?"})}),Object(s.jsxs)(y.a.Body,{children:[Object(s.jsx)("b",{children:"NOTE: This will only clear the students and all teams from the database, admins must be deleted manually in the Cloud Firestore interface"}),Object(s.jsx)(x.a,{className:"text-left",children:Object(s.jsxs)(x.a.Group,{controlId:"fullname",children:[Object(s.jsx)(x.a.Label,{children:'Enter the word "reset" to clear the database'}),Object(s.jsx)(x.a.Control,{required:!0,type:"text",name:"word",placeholder:"",onChange:this.handleInput,value:this.state.word})]})})]}),Object(s.jsx)(y.a.Footer,{children:Object(s.jsx)(v.a,{variant:"danger",onClick:this.handleDelete,children:"Reset Database"})})]}),Object(s.jsx)(v.a,{variant:"danger",onClick:this.handleShow,children:"Reset Database"})]})}}]),a}(i.a.Component),Q=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={uniqname:sessionStorage.getItem("uniqname"),usertype:sessionStorage.getItem("user-type"),onTeam:!1,searched:!1,searchVal:"",searchType:"",foundTeam:!1,teamName:"",teams:[],teamsLoaded:!1,teamsLength:0,users:[],usersLoaded:!1,usersLength:0,numStudents:0,unassigned:[],unassignedLoaded:!1,unassignedLength:0,admins:[],adminsLoaded:!1,adminsLength:0,displayErrorMessage:!1,errorMessage:"",showModal:!1},s.handleSearch=s.handleSearch.bind(Object(f.a)(s)),s.updateInput=s.updateInput.bind(Object(f.a)(s)),s.handleModal=s.handleModal.bind(Object(f.a)(s)),s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t,a,s,n,i,c,r=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=h.firestore()).settings({timestampsInSnapshots:!0}),e.next=4,O.getUserInfo(this.state.uniqname).then((function(e){r.setState({usertype:e.usertype}),sessionStorage.setItem("user-type",e.usertype),console.log("user data updated: ",e)}));case 4:return a=[],e.next=7,t.collection("teams").get().then((function(e){e.docs.forEach((function(e){a.push(e.data())})),r.setState({teams:a,teamsLoaded:!0,teamsLength:a.length}),console.log("teams loaded: ",a,"size: ",a.length)}));case 7:return s=[],e.next=10,t.collection("users").get().then((function(e){e.docs.forEach((function(e){s.push(e.data())})),r.setState({users:s,usersLoaded:!0,usersLength:s.length}),console.log("users_in loaded: ",s)}));case 10:return n=[],e.next=13,t.collection("users").where("isAdmin","==",!1).get().then((function(e){e.docs.forEach((function(e){n.push(e.data())})),r.setState({numStudents:n.length})}));case 13:return i=[],e.next=16,t.collection("users").where("onTeam","==",!1).where("isAdmin","==",!1).get().then((function(e){e.docs.forEach((function(e){i.push(e.data())})),r.setState({unassigned:i,unassignedLoaded:!0,unassignedLength:i.length}),console.log("unassigned loaded: ",i)}));case 16:return c=[],e.next=19,t.collection("users").where("isAdmin","==",!0).get().then((function(e){e.docs.forEach((function(e){c.push(e.data())})),r.setState({admins:c,adminsLoaded:!0,adminsLength:c.length}),console.log("admins_in loaded: ",c)}));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleModal",value:function(e){var t=!this.state.showModal;this.setState({showModal:t}),console.log("modal: ",this.state.showModal)}},{key:"updateInput",value:function(e){this.setState(Object(j.a)({},e.target.name,e.target.value)),"searchVal"!==e.target.name&&"searchType"!==e.target.name||this.setState({displayErrorMessage:!1,errorMessage:""}),console.log("value",e.target.value),console.log("name",e.target.name)}},{key:"handleSearch",value:function(e){var t=this;e.preventDefault(),!0===this.state.searched&&this.setState({searched:!1}),console.log(this.state);var a=h.firestore();a.settings({timestampsInSnapshots:!0}),console.log(this.state.searchType),"Teamname"===this.state.searchType?a.collection("teams").doc(this.state.searchVal).get().then((function(e){if(console.log(e.data()),e.data()){var a=t.state.searchVal.split(" ").join("");t.setState({searched:!0,foundTeam:!0,teamName:a})}else t.setState({displayErrorMessage:!0,errorMessage:"This is not a current team name"})})).catch((function(e){console.log(e)})):"Uniqname"===this.state.searchType?(console.log("users: ",this.state.users),a.collection("users").doc(this.state.searchVal).get().then((function(e){console.log(e.data()),e.data()?!1===e.data().onTeam?(t.setState({searched:!0,foundTeam:!1}),t.setState({displayErrorMessage:!0,errorMessage:"This user is not yet on a team"})):!0===e.data().onTeam&&(t.setState({teamName:e.data().teamName,displayErrorMessage:!1,errorMessage:""}),t.setState({searched:!0,foundTeam:!0})):t.setState({displayErrorMessage:!0,errorMessage:"This user is not on the roster"})})).catch((function(e){console.log(e)}))):this.setState({displayErrorMessage:!0,errorMessage:"Must select a Uniqname or Teamname"})}},{key:"handleDelete",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("reset"!==this.state.word){e.next=12;break}return(t=h.firestore()).settings({timestampsInSnapshots:!0}),e.next=5,t.collection("teams").get().then((function(e){e.forEach((function(e){e.ref.delete().then((function(){console.log("successfully deleted team")}))}))}));case 5:return e.next=7,t.collection("users").where("isAdmin","==",!1).get().then((function(e){e.forEach((function(e){e.ref.delete().then((function(){console.log("successfully deleted user")}))}))}));case 7:console.log("finished deleting"),alert("Database successfully reset"),this.setState({show1:!1}),e.next=14;break;case 12:alert("Word entered incorrectly. Database not reset"),this.setState({show1:!1});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(!sessionStorage.getItem("uniqname"))return console.log("redirecting to logout from admin home"),Object(s.jsx)(S.a,{to:"/"});if("team"===this.state.usertype)return console.log("redirecting from admin home to view team"),Object(s.jsx)(S.a,{to:"/view-team"});if("unassigned"===this.state.usertype)return console.log("redirecting from admin home to create team"),Object(s.jsx)(S.a,{to:"/create-team"});JSON.stringify(this.state.teams);return Object(s.jsxs)("div",{className:"Home",children:[Object(s.jsx)(U,{}),Object(s.jsx)("header",{className:"App-header",children:Object(s.jsxs)("div",{className:"body",children:[Object(s.jsx)("h1",{className:"title mb-3",children:"Admin Dashboard"}),this.state.usersLoaded&&this.state.unassignedLoaded&&this.state.teamsLoaded&&this.state.adminsLoaded&&Object(s.jsx)(V.a,{as:"div",className:" justify-content-between align-items-between shadow-sm w-100 mb-4",children:Object(s.jsx)(V.a.Body,{className:"text-left",children:Object(s.jsxs)(F.a,{md:12,className:"align-items-md-center",children:[Object(s.jsxs)(B.a,{xl:9.5,lg:9,children:[Object(s.jsx)(V.a.Title,{children:"Summary"}),Object(s.jsx)("a",{className:"text-secondary",href:"/admin-view",children:Object(s.jsxs)(V.a.Subtitle,{className:"mb-1",children:[this.state.teamsLength," total teams registered"]})}),Object(s.jsxs)(V.a.Subtitle,{className:"mb-1",children:[this.state.unassignedLength," unassigned students out of ",this.state.numStudents," total students"]}),Object(s.jsxs)(V.a.Subtitle,{children:[this.state.adminsLength," administrators out of ",this.state.usersLength," total users"]})]}),Object(s.jsx)(B.a,{xl:2.5,lg:3,className:"mr-0 ",children:Object(s.jsxs)(T.a,{vertical:!0,children:[Object(s.jsx)(q.a,{placement:"right",className:"mb-1 float-right",overlay:Object(s.jsx)(N.a,{className:"text-left",id:"tooltip-top",children:"Upload rosters, reset the database, and learn how to use 493 teams."}),children:Object(s.jsx)(v.a,{className:"mb-2",onClick:this.handleModal,alt:"information instructions",variant:"success",children:"Admin Settings"})},"right"),Object(s.jsx)(k,{className:"pr-0 mt-2"})]})})]})})}),this.state.displayErrorMessage&&Object(s.jsx)(F.a,{className:"w-100 align-items-center m-2",children:Object(s.jsx)(B.a,{className:"col-md-8 offset-md-2 w-100",children:Object(s.jsx)(W.a,{style:{"font-size":14},variant:"danger",className:"w-100 small",onClose:function(){return e.setState({displayErrorMessage:!1,errorMessage:""})},dismissible:!0,children:this.state.errorMessage})})}),Object(s.jsxs)(x.a,{inline:!0,className:"search-bar w-100",onSubmit:this.handleSearch,children:[Object(s.jsxs)(x.a.Control,{as:"select",value:this.state.searchType,name:"searchType",onChange:this.updateInput,custom:!0,children:[Object(s.jsx)("option",{value:"default",children:"Search by..."}),Object(s.jsx)("option",{value:"Teamname",children:"Teamname"}),Object(s.jsx)("option",{value:"Uniqname",children:"Uniqname"})]}),Object(s.jsx)(x.a.Control,{required:!0,type:"text",name:"searchVal",value:this.state.searchVal,onChange:this.updateInput,placeholder:"Search by teamname or uniqname of team member",className:"mr-sm-2 w-75"}),Object(s.jsx)(v.a,{variant:"success",type:"submit",children:"Search"})]}),Object(s.jsx)("br",{}),this.state.searched?Object(s.jsxs)("div",{className:"adminsearch-holder m-1",children:[" ",Object(s.jsx)(z,{team:this.state.teamName,onTeam:this.state.foundTeam})," "]}):Object(s.jsx)("br",{}),Object(s.jsxs)(y.a,{size:"lg",centered:!0,show:this.state.showModal,onHide:this.handleModal,children:[Object(s.jsx)(y.a.Header,{closeButton:!0,children:Object(s.jsx)(y.a.Title,{children:"Admin Settings"})}),Object(s.jsx)(K,{}),Object(s.jsxs)(y.a.Footer,{as:"div",className:"w-100 d-flex justify-content-sm-between",children:[Object(s.jsx)(Z,{}),Object(s.jsx)(v.a,{className:"ml-2",variant:"secondary",onClick:this.handleModal,children:"Okay"})]})]})]})})]})}}]),a}(i.a.Component),$=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),s=t.call(this,e),console.log("props",e),s.state={numInv:0,uniqname:sessionStorage.getItem("uniqname"),usertype:sessionStorage.getItem("user-type"),teams:[],teamsLoaded:!1,dataLoaded:!1,onTeam:!1},s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t,a,s=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getUserInfo(this.state.uniqname).then((function(e){s.setState({usertype:e.usertype,onTeam:"team"===e.usertype}),sessionStorage.setItem("user-type",e.usertype),console.log("user data updated: ",e)}));case 2:return(t=h.firestore()).settings({timestampsInSnapshots:!0}),a=[],e.next=7,t.collection("teams").get().then((function(e){e.docs.forEach((function(e){a.push(e.data())})),s.setState({teams:a,teamsLoaded:!0}),console.log("oh dear",a)}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){if(!sessionStorage.getItem("uniqname"))return Object(s.jsx)(S.a,{to:"/"});if("admin"===this.state.usertype)return Object(s.jsx)(S.a,{to:"/admin-home"});this.state.usertype;var e=this.state.teams.map((function(e){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:e.teamName}),Object(s.jsxs)("td",{children:[e.uniqname1Accepted?e.uniqname1:"",e.uniqname2Accepted?", "+e.uniqname2:"",e.uniqname3Accepted?", "+e.uniqname3:"",e.uniqname4Accepted?", "+e.uniqname4:""]}),Object(s.jsx)("td",{children:""===e.description?Object(s.jsx)("i",{className:"text-secondary",children:"No description available"}):e.description})]})}));return Object(s.jsxs)("div",{className:"viewteam",children:[Object(s.jsx)(U,{}),this.state.teamsLoaded?Object(s.jsx)("header",{className:"loggedInHeader",children:Object(s.jsxs)("div",{className:"body ",children:[Object(s.jsx)("h1",{className:"title",children:"Registered Teams"}),Object(s.jsxs)("div",{className:"body-content w-100",children:[Object(s.jsxs)(R.a,{className:"seeTeams w-100 ml-0 pl-0",responsive:"sm",bordered:!0,hover:!0,striped:!0,children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{className:"seeTeams",children:"Name"}),Object(s.jsx)("th",{className:"seeTeams",children:"Registered Team Members"}),Object(s.jsx)("th",{className:"seeTeams",children:"Description"})]})}),Object(s.jsx)("tbody",{striped:!0,hover:!0,children:e})]}),0===this.state.teams.length&&Object(s.jsx)("i",{className:"text-muted",children:"There are currently no teams registered"})]})]})}):Object(s.jsx)("header",{className:"loggedInHeader",children:Object(s.jsxs)("div",{className:"body",children:[Object(s.jsx)("h1",{className:"title",children:"Loading..."}),Object(s.jsx)("div",{className:"body-content"})]})})]})}}]),a}(i.a.Component),ee=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),s=t.call(this,e),console.log("props",e),s.state={numInv:0,uniqname:sessionStorage.getItem("uniqname"),usertype:sessionStorage.getItem("user-type"),dataLoaded:!1,onTeam:!1,teamsLoaded:!1,teams:[],users:[],usersLoaded:!1},s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t,a,s,n=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=h.firestore()).settings({timestampsInSnapshots:!0}),e.next=4,O.getUserInfo(this.state.uniqname).then((function(e){n.setState({usertype:e.usertype,onTeam:"team"===e.usertype}),sessionStorage.setItem("user-type",e.usertype),console.log("user data updated: ",e)}));case 4:return a=[],e.next=7,t.collection("teams").get().then((function(e){e.docs.forEach((function(e){a.push(e.data())})),n.setState({teams:a,teamsLoaded:!0}),console.log("teams loaded: ",a)}));case 7:return s=[],e.next=10,t.collection("users").get().then((function(e){e.docs.forEach((function(e){s.push(e.data())})),n.setState({users:s,usersLoaded:!0}),console.log("users_in loaded: ",s)}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){if(!sessionStorage.getItem("uniqname"))return console.log("redirecting from admin see teams to logout"),Object(s.jsx)(S.a,{to:"/"});if("team"===this.state.usertype)return console.log("redirecting from admin see teams to view team"),Object(s.jsx)(S.a,{to:"/view-team"});if("unassigned"===this.state.usertype)return console.log("redirecting from admin see teams to create team"),Object(s.jsx)(S.a,{to:"/create-team"});var e=this.state.teams.map((function(e){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:e.teamName}),Object(s.jsxs)("td",{children:[e.uniqname1Accepted?e.uniqname1:"",e.uniqname2Accepted?", "+e.uniqname2:"",e.uniqname3Accepted?", "+e.uniqname3:"",e.uniqname4Accepted?", "+e.uniqname4:""]}),Object(s.jsx)("td",{children:e.description})]})}));return Object(s.jsxs)("div",{className:"admin-see-teams",children:[Object(s.jsx)(U,{}),this.state.teamsLoaded?Object(s.jsx)("header",{className:"loggedInHeader",children:Object(s.jsxs)("div",{className:"body",children:[Object(s.jsx)(F.a,{children:Object(s.jsxs)(B.a,{className:"text-left align-items-sm-start mb-3",children:[Object(s.jsx)("h1",{className:"title mb-3",children:"Registered Teams"}),Object(s.jsx)("a",{className:"text-secondary ",href:"/admin-home",children:Object(s.jsx)(V.a.Subtitle,{className:"mb-1",children:"Find a specific team"})})]})}),Object(s.jsxs)("div",{className:"body-content",children:[Object(s.jsxs)(R.a,{className:"seeTeams align-content-center",responsive:"sm",bordered:!0,hover:!0,striped:!0,children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{className:"seeTeams",children:"Name"}),Object(s.jsx)("th",{className:"seeTeams",children:"Registered Team Members"}),Object(s.jsx)("th",{className:"seeTeams",children:"Description"})]})}),Object(s.jsx)("tbody",{striped:!0,hover:!0,children:e})]}),0===this.state.teams.length&&Object(s.jsx)("i",{className:"text-muted",children:"There are currently no teams registered"})]})]})}):Object(s.jsx)("header",{className:"loggedInHeader",children:Object(s.jsxs)("div",{className:"body",children:[Object(s.jsx)("h1",{className:"title",children:"Loading..."}),Object(s.jsx)("div",{className:"body-content"})]})})]})}}]),a}(i.a.Component),te=(a(141),a(154)),ae=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={uniqname:sessionStorage.getItem("uniqname"),usertype:sessionStorage.getItem("user-type"),loggedin:!1,data:{}},s.handleLogin=s.handleLogin.bind(Object(f.a)(s)),s}return Object(l.a)(a,[{key:"handleLogin",value:function(e){this.setState({data:e}),"user-type"in e&&(sessionStorage.setItem("uniqname",e.uniqname),sessionStorage.setItem("user-type",e["user-type"]),console.log("setting user-type to: ",sessionStorage.getItem("user-type")),this.setState({loggedin:!0,data:{usertype:e["user-type"],uniqname:e.uniqname,accessToken:e.accessToken}}))}},{key:"render",value:function(){return console.log("am i admin",this.state.data.usertype),this.state.loggedin&&"not umich email address"!==this.state.data.usertype&&"'not on roster'"!==this.state.data.usertype?this.state.loggedin&&"admin"===this.state.data.usertype?Object(s.jsx)(S.a,{to:"/admin-home"}):this.state.loggedin&&"unassigned"===this.state.data.usertype?Object(s.jsx)(S.a,{to:"/create-team"}):this.state.loggedin&&"team"===this.state.data.usertype?Object(s.jsx)(S.a,{to:"/view-team"}):void 0:Object(s.jsx)("div",{className:"Home",children:Object(s.jsxs)("header",{className:"App-header",children:[Object(s.jsx)(te.a,{src:"./EECS493_landscape.png",fluid:!0}),Object(s.jsxs)(F.a,{children:[Object(s.jsx)("i",{className:"mr-2",children:"Sign in to view your team"}),Object(s.jsx)(M,{className:"loginButton ml-2",navbar:!1,callback:this.handleLogin})]}),Object(s.jsxs)(Y.a,{className:" instructions justify-content-md-center mb-10 w-75",children:[Object(s.jsx)(V.a,{bg:"info",className:"cardclass",children:Object(s.jsxs)(V.a.Body,{children:[Object(s.jsx)(V.a.Title,{children:"Step 1"}),Object(s.jsxs)(V.a.Text,{children:["Find a group of 4 students who have similar interests as you on the ",Object(s.jsx)("a",{children:"Class Team-Finding Google Sheet."})]})]})}),Object(s.jsx)(V.a,{bg:"primary",className:"cardclass",children:Object(s.jsxs)(V.a.Body,{children:[Object(s.jsx)(V.a.Title,{children:"Step 2"}),Object(s.jsx)(V.a.Text,{children:"Log into EECS 493 Teams. Have 1 team member create the team, then have all other team members log in to accept the invitation."})]})}),Object(s.jsx)(V.a,{bg:"success",className:"cardclass",children:Object(s.jsxs)(V.a.Body,{children:[Object(s.jsx)(V.a.Title,{children:"Step 3"}),Object(s.jsx)(V.a.Text,{children:"Continue using EECS 493 Teams to see your team members' progress!"})]})})]})]})})}}]),a}(i.a.Component),se=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(s.jsx)("div",{className:"App",children:Object(s.jsxs)(S.d,{children:[Object(s.jsx)(S.b,{path:"/create-team",children:Object(s.jsx)(H,{})}),Object(s.jsx)(S.b,{path:"/team-invites",children:Object(s.jsx)(G,{})}),Object(s.jsx)(S.b,{path:"/admin-home",children:Object(s.jsx)(Q,{})}),Object(s.jsx)(S.b,{path:"/admin-view",children:Object(s.jsx)(ee,{})}),Object(s.jsx)(S.b,{path:"/view-team",children:Object(s.jsx)(P,{})}),Object(s.jsx)(S.b,{path:"/see-teams",children:Object(s.jsx)($,{})}),Object(s.jsx)(S.b,{path:"/",children:Object(s.jsx)(ae,{})})]})})}}]),a}(i.a.Component),ne=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,162)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),s(e),n(e),i(e),c(e)}))},ie=a(25);r.a.render(Object(s.jsx)(ie.a,{children:Object(s.jsx)(se,{})}),document.getElementById("root")),ne()},28:function(e,t,a){}},[[142,1,2]]]);
//# sourceMappingURL=main.e3fcc16b.chunk.js.map