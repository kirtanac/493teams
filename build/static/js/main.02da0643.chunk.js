(this.webpackJsonp493teams=this.webpackJsonp493teams||[]).push([[0],{29:function(e,t,a){},73:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a(2),i=a.n(n),c=a(24),r=a.n(c),o=(a(73),a(74),a(15)),d=a(16),l=a(18),m=a(17),u=(a.p,a(29),a(39));u.a.initializeApp({apiKey:"AIzaSyC2y91CURRmBsyzrIi96IVx_2tdnMEIYpw",authDomain:"eecs-493-96f7b.firebaseapp.com",databaseURL:"https://eecs-493-96f7b.firebaseio.com",projectId:"eecs-493-96f7b",storageBucket:"eecs-493-96f7b.appspot.com",messagingSenderId:"746380302805",appId:"1:746380302805:web:d44a0675ece3ea84d2855c"});var h=u.a,j=a(34),b=a(10),p=a.n(b),O=a(14),g=a(11),x={getUserInfo:function(){var e=Object(O.a)(p.a.mark((function e(t){var a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("in getUserInfo",t),e.next=3,u.a.firestore();case 3:return(s=e.sent).settings({timestampsInSnapshots:!0}),e.next=7,s.collection("users").doc(t).get().then((function(e){var t;console.log("returned ",e),t=e.data().isAdmin?"admin":e.data().onTeam?"team":"unassigned",(a=e.data()).usertype=t})).catch((function(e){console.log("error!"),a="error"}));case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getTeamInfo:function(){var e=Object(O.a)(p.a.mark((function e(t){var a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s=u.a.firestore()).settings({timestampsInSnapshots:!0}),e.next=4,s.collection("teams").doc(t).get().then((function(e){console.log("returned ",e),a=e.data()})).catch((function(e){console.log("error!"),a="error"}));case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getTeamFromUser:function(){var e=Object(O.a)(p.a.mark((function e(t){var a,s,n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=u.a.firestore()).settings({timestampsInSnapshots:!0}),e.next=4,a.collection("users").doc(t).get().then((function(e){!1===e.data().onTeam?s=!1:(s=!0,n=e.data().teamName)}));case 4:if(!s){e.next=9;break}return e.next=7,a.collection("teams").doc(n).get().then((function(e){i=e.data(),console.log("data in helpers: ",i)}));case 7:e.next=10;break;case 9:i="not on team";case 10:return console.log("returned ",i),e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),userStatus:function(){var e=Object(O.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=u.a.firestore()).settings({timestampsInSnapshots:!0}),e.next=4,a.collection("users").doc(t).get().then((function(e){return e.empty?"not on roster":e.data().isAdmin?"admin":e.data().onTeam?"team":"unassigned"}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=a(102),f=a(101),y=a(100),q=a(94),S=a(99),T=a(19),I=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={teamName:"",redi:!1,uniq1:sessionStorage.getItem("uniqname"),uniq2:"",uniq3:"",uniq4:"",description:"",show:!1,show2:!1,uniqname:sessionStorage.getItem("uniqname"),usertype:sessionStorage.getItem("user-type"),onTeam:!1},s.updateInput=s.updateInput.bind(Object(g.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(g.a)(s)),s.addTeam=s.addTeam.bind(Object(g.a)(s)),s.sendData=s.sendData.bind(Object(g.a)(s)),s.handleShow=s.handleShow.bind(Object(g.a)(s)),s.handleHide=s.handleHide.bind(Object(g.a)(s)),s.handleSecondHide=s.handleSecondHide.bind(Object(g.a)(s)),s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(O.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getUserInfo(this.state.uniqname).then((function(e){t.setState({usertype:e.usertype,onTeam:"team"===e.usertype}),sessionStorage.setItem("user-type",e.usertype),console.log("user data updated: ",e)}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendData",value:function(){var e=Object(O.a)(p.a.mark((function e(t,a,s){var n,i,c,r,o,d=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=h.firestore()).settings({timestampsInSnapshots:!0}),c=!1,r="",e.t0=t,e.next=1===e.t0?7:2===e.t0?11:3===e.t0?13:4===e.t0?15:17;break;case 7:return i=this.state.uniq1,c=!0,r=a,e.abrupt("break",17);case 11:return i=this.state.uniq2,e.abrupt("break",17);case 13:return i=this.state.uniq3,e.abrupt("break",17);case 15:return i=this.state.uniq4,e.abrupt("break",17);case 17:return o=n.collection("users").doc(i),e.next=20,o.get().then((function(e){if(e.exists){x.getUserInfo(d.state.uniqname).then((function(e){d.setState({usertype:e.usertype,onTeam:"team"===e.usertype}),sessionStorage.setItem("user-type",e.usertype),console.log("user data updated: ",e)}));var t=e.data().invitations,s=e.data().numInvitations;t.push(a),n.collection("users").doc(i).update({invitations:t,numInvitations:s+1,onTeam:c})}else{var o={uniqname:i,invitations:[a],isAdmin:!1,numInvitations:1,onTeam:c,teamName:r};n.collection("users").doc(i).set(o)}}));case 20:e.sent;case 21:case"end":return e.stop()}}),e,this)})));return function(t,a,s){return e.apply(this,arguments)}}()},{key:"updateInput",value:function(e){this.setState(Object(j.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){alert("A name was submitted: "+this.state.value),e.preventDefault()}},{key:"addTeam",value:function(e){e.preventDefault();var t=h.firestore();t.settings({timestampsInSnapshots:!0});var a=this.state.teamName.split(" ").join("");""===this.state.uniq4?(t.collection("teams").doc(a).set({teamName:a,uniqname1:this.state.uniq[0],uniqname2:this.state.uniq[1],uniqname3:this.state.uniq[2],uniqname4:"",uniqname1Accepted:!1,uniqname2Accepted:!1,uniqname3Accepted:!1,description:this.state.description}),this.sendData(1,a),this.sendData(2,a),this.sendData(3,a)):(t.collection("teams").doc(a).set({teamName:a,uniqname1:this.state.uniq1,uniqname2:this.state.uniq2,uniqname3:this.state.uniq3,uniqname4:this.state.uniq4,uniqname1Accepted:!1,uniqname2Accepted:!1,uniqname3Accepted:!1,uniqname4Accepted:!1,description:this.state.description}),this.sendData(1,a),this.sendData(2,a),this.sendData(3,a),this.sendData(4,a)),this.setState({show2:!0})}},{key:"handleShow",value:function(e){e.preventDefault(),console.log("made it here"),this.setState({show:!0})}},{key:"handleHide",value:function(){this.setState({show:!1})}},{key:"handleSecondHide",value:function(){this.setState({redi:!0,show2:!1})}},{key:"render",value:function(){return!0===this.state.redi||"team"===sessionStorage.getItem("user-type")||this.state.onTeam?Object(s.jsx)(T.a,{to:"/view-team"}):"admin"===this.state.usertype?Object(s.jsx)(T.a,{to:"/admin-home"}):sessionStorage.getItem("uniqname")?(console.log(this.state),Object(s.jsxs)("div",{className:"createteam",children:[Object(s.jsxs)(v.a,{bg:"light",expand:"lg",children:[Object(s.jsx)(v.a.Brand,{href:"/create-team",children:Object(s.jsx)("img",{src:"/EECS493_landscape.png",height:"30",className:"d-inline-block align-top",alt:"EECS 493 Teams logo"})}),Object(s.jsx)(v.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(s.jsxs)(v.a.Collapse,{id:"basic-navbar-nav",children:[Object(s.jsxs)(f.a,{className:"mr-auto",children:[Object(s.jsx)(f.a.Link,{href:"/create-team",children:"Create Team"}),Object(s.jsx)(f.a.Link,{href:"/team-invites",children:"Team Invitations"}),Object(s.jsx)(f.a.Link,{href:"/see-teams",children:"Registered Teams"})]}),Object(s.jsx)(f.a,{children:Object(s.jsx)(f.a.Link,{className:"mr-sm-2",href:"/",children:"Logout"})})]})]}),Object(s.jsx)("header",{className:"loggedInHeader",children:Object(s.jsxs)("div",{className:"body",children:[Object(s.jsx)("h1",{className:"title",children:"Register your team"}),Object(s.jsxs)("div",{className:"body-content",children:[Object(s.jsxs)(y.a,{className:"text-left",onSubmit:this.handleShow,children:[Object(s.jsxs)(y.a.Group,{controlId:"fullname",children:[Object(s.jsx)(y.a.Label,{children:"Team name*"}),Object(s.jsx)(y.a.Control,{required:!0,type:"text",name:"teamName",placeholder:"",onChange:this.updateInput,value:this.state.teamName})]}),Object(s.jsxs)(y.a.Group,{controlId:"uniq1",children:[Object(s.jsx)(y.a.Label,{children:"Uniqname 1*"}),Object(s.jsx)(y.a.Control,{disabled:!0,type:"text",name:"uniq1",placeholder:this.state.uniqname,defaultValue:this.state.uniqname})]}),Object(s.jsxs)(y.a.Group,{controlId:"uniq1",children:[Object(s.jsx)(y.a.Label,{children:"Uniqname 2*"}),Object(s.jsx)(y.a.Control,{required:!0,type:"text",name:"uniq2",placeholder:"",onChange:this.updateInput,value:this.state.uniq2})]}),Object(s.jsxs)(y.a.Group,{controlId:"uniq1",children:[Object(s.jsx)(y.a.Label,{children:"Uniqname 3*"}),Object(s.jsx)(y.a.Control,{required:!0,type:"text",name:"uniq3",placeholder:"",onChange:this.updateInput,value:this.state.uniq3})]}),Object(s.jsxs)(y.a.Group,{controlId:"uniq1",children:[Object(s.jsx)(y.a.Label,{children:"Uniqname 4*"}),Object(s.jsx)(y.a.Control,{type:"text",name:"uniq4",placeholder:"",onChange:this.updateInput,value:this.state.uniq4})]}),Object(s.jsxs)(y.a.Group,{controlId:"uniq1",children:[Object(s.jsx)(y.a.Label,{children:"Project Description"}),Object(s.jsx)(y.a.Control,{type:"textarea",size:"lg",name:"description",placeholder:"",onChange:this.updateInput,value:this.state.description}),Object(s.jsx)(y.a.Text,{id:"passwordHelpBlock",muted:!0,children:"You can do this later too!"})]}),Object(s.jsx)("br",{}),Object(s.jsx)(q.a,{variant:"primary",type:"submit",children:"Submit"})]}),Object(s.jsxs)(S.a,{show:this.state.show,onHide:this.handleHide,children:[Object(s.jsx)(S.a.Header,{closeButton:!0,children:Object(s.jsx)(S.a.Title,{children:"Do you want to create this team?"})}),Object(s.jsxs)(S.a.Body,{children:[Object(s.jsx)("h2",{children:this.state.teamName}),Object(s.jsx)("p",{children:this.state.uniq1}),Object(s.jsx)("p",{children:this.state.uniq2}),Object(s.jsx)("p",{children:this.state.uniq3}),Object(s.jsx)("p",{children:this.state.uniq4})]}),Object(s.jsxs)(S.a.Footer,{children:[Object(s.jsx)(q.a,{variant:"secondary",onClick:this.handleHide,children:"Cancel"}),Object(s.jsx)(q.a,{variant:"success",onClick:this.addTeam,children:"Create Team"})]})]}),Object(s.jsxs)(S.a,{show:this.state.show2,onHide:this.handleHide,children:[Object(s.jsx)(S.a.Header,{closeButton:!0,children:Object(s.jsx)(S.a.Title,{children:"Success!"})}),Object(s.jsxs)(S.a.Body,{children:[Object(s.jsx)("h2",{children:"Please ask these team members to log into 493teams and accept this team invitation:"}),Object(s.jsx)("p",{children:this.state.uniq1}),Object(s.jsx)("p",{children:this.state.uniq2}),Object(s.jsx)("p",{children:this.state.uniq3}),Object(s.jsx)("p",{children:this.state.uniq4})]}),Object(s.jsx)(S.a.Footer,{children:Object(s.jsx)(q.a,{variant:"success",onClick:this.handleSecondHide,children:"Create Team"})})]})]})]})})]})):Object(s.jsx)(T.a,{to:"/"})}}]),a}(i.a.Component),k=a(95),N=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(o.a)(this,a),s=t.call(this,e),console.log("props",e),s.state={teams:[],userdata:e.location,uniqname:sessionStorage.getItem("uniqname"),usertype:sessionStorage.getItem("user-type"),teamName:"",onTeam:"team"===sessionStorage.getItem("user-type"),dataLoaded:!1},s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(O.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getUserInfo(this.state.uniqname).then((function(e){t.setState({usertype:e.usertype,onTeam:"team"===e.usertype}),sessionStorage.setItem("user-type",e.usertype),console.log("user data updated: ",e)}));case 2:if("team"!==sessionStorage.getItem("user-type")){e.next=8;break}return h.firestore().settings({timestampsInSnapshots:!0}),console.log("state",this.state.uniqname),e.next=8,x.getTeamFromUser(this.state.uniqname).then((function(e){t.setState({teams:e,dataLoaded:!0}),console.log("team data loaded: ",e)}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){if(!this.state.uniqname)return Object(s.jsx)(T.a,{to:"/"});if(!this.state.onTeam)return Object(s.jsx)(T.a,{to:"/create-team"});console.log(this.state.usertype);var e=!0===this.state.dataLoaded&&this.state.onTeam;return console.log("loaded: ",e),Object(s.jsxs)("div",{className:"viewteam",children:[Object(s.jsxs)(v.a,{bg:"light",expand:"lg",children:[Object(s.jsx)(v.a.Brand,{href:"/view-team",children:Object(s.jsx)("img",{src:"/EECS493_landscape.png",height:"30",className:"d-inline-block align-top",alt:"EECS 493 Teams logo"})}),Object(s.jsx)(v.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(s.jsxs)(v.a.Collapse,{id:"basic-navbar-nav",children:[Object(s.jsxs)(f.a,{className:"mr-auto",children:[Object(s.jsx)(f.a.Link,{href:"/view-team",children:"My Team"}),Object(s.jsx)(f.a.Link,{href:"/see-teams",children:"All Teams"})]}),Object(s.jsx)(f.a,{children:Object(s.jsx)(f.a.Link,{className:"mr-sm-2",href:"/",children:"Logout"})})]})]}),Object(s.jsx)("header",{className:"loggedInHeader",children:Object(s.jsxs)("div",{className:"body",children:[Object(s.jsx)("h1",{className:"title",children:"Your Current Team"}),Object(s.jsxs)("div",{className:"body-content",children:[Object(s.jsx)("p",{children:this.state.dataLoaded?Object(s.jsxs)(k.a,{striped:!0,bordered:!0,className:"w-25",children:[Object(s.jsxs)("thead",{children:[Object(s.jsx)("tr",{children:Object(s.jsx)("th",{colSpan:"2",children:this.state.teams.teamName})}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Uniqname"}),Object(s.jsx)("th",{children:"Status"})]})]}),Object(s.jsxs)("tbody",{children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:this.state.teams.uniqname1}),Object(s.jsx)("td",{children:this.state.teams.uniqname1Accepted?"accepted":"pending"})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:this.state.teams.uniqname2}),Object(s.jsx)("td",{children:this.state.teams.uniqname2Accepted?"accepted":"pending"})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:this.state.teams.uniqname3}),Object(s.jsx)("td",{children:this.state.teams.uniqname3Accepted?"accepted":"pending"})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:this.state.teams.uniqname4}),Object(s.jsx)("td",{children:this.state.teams.uniqname4Accepted?"accepted":"pending"})]})]})]}):Object(s.jsx)("i",{children:"Loading..."})}),Object(s.jsx)("br",{})]})]})})]})}}]),a}(i.a.Component),w=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={uniqname:sessionStorage.getItem("uniqname"),usertype:sessionStorage.getItem("user-type"),onTeam:!1,teams:{},data:e,dataLoaded:!1,doneEditing:!1},s.editTeam=s.editTeam.bind(Object(g.a)(s)),s.deleteTeam=s.deleteTeam.bind(Object(g.a)(s)),s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(O.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("check props ",this.state.data),h.firestore().settings({timestampsInSnapshots:!0}),this.props.onTeam&&x.getTeamInfo(this.props.team).then((function(e){console.log("data from get team info: ",e),t.setState({teams:e,dataLoaded:!0})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"editTeam",value:function(e){var t=this;e.preventDefault();var a=prompt("What do you want to change "+e.target.id+" to?");console.log(a);var s=h.firestore();s.settings({timestampsInSnapshots:!0}),"teamName"!==e.target.id&&(console.log("made it in here"),x.getUserInfo(a).then((function(n){if(!0===n.onTeam)alert("User already on team enter a different uniqname");else{var i;switch(s.collection("users").doc(a).update({onTeam:!0,teamName:t.state.teams.teamName}),e.target.id){case"uniqname1":i=t.state.teams.uniqname1;break;case"uniqname2":i=t.state.teams.uniqname2;break;case"uniqname3":i=t.state.teams.uniqname3;break;case"uniqname4":i=t.state.teams.uniqname4}s.collection("users").doc(i).update({onTeam:!1,teamName:""}),s.collection("teams").doc(t.state.teams.teamName).update(Object(j.a)({},e.target.id,a))}}))),x.getTeamInfo(this.props.team).then((function(e){console.log(e),t.setState({teams:e}),t.setState({dataLoaded:!0})}))}},{key:"deleteTeam",value:function(e){var t=this;e.preventDefault();var a=h.firestore();a.settings({timestampsInSnapshots:!0}),x.getUserInfo(this.state.teams.uniqname1).then((function(e){if(e.onTeam&&e.teamName!==t.props.team){var s=e.invitations,n=s.indexOf(t.props.team);n>-1&&s.splice(n,1);var i=e.numInvitations-1;a.collection("users").doc(t.state.teams.uniqname1).update({onTeam:!1,teamName:"",invitations:s,numInvitations:i})}else{var c=e.invitations,r=c.indexOf(t.props.team);r>-1&&c.splice(r,1);var o=e.numInvitations-1;a.collection("users").doc(t.state.teams.uniqname1).update({onTeam:!0,teamName:"",invitations:c,numInvitations:o})}})),x.getUserInfo(this.state.teams.uniqname2).then((function(e){if(e.onTeam&&e.teamName!==t.props.team){var s=e.invitations,n=s.indexOf(t.props.team);n>-1&&s.splice(n,1);var i=e.numInvitations-1;a.collection("users").doc(t.state.teams.uniqname2).update({invitations:s,numInvitations:i})}else{var c=e.invitations,r=c.indexOf(t.props.team);r>-1&&c.splice(r,1);var o=e.numInvitations-1;a.collection("users").doc(t.state.teams.uniqname2).update({onTeam:!1,teamName:"",invitations:c,numInvitations:o})}})),x.getUserInfo(this.state.teams.uniqname3).then((function(e){if(e.onTeam&&e.teamName!==t.props.team){var s=e.invitations,n=s.indexOf(t.props.team);n>-1&&s.splice(n,1);var i=e.numInvitations-1;a.collection("users").doc(t.state.teams.uniqname3).update({onTeam:!1,teamName:"",invitations:s,numInvitations:i})}else{var c=e.invitations,r=c.indexOf(t.props.team);r>-1&&c.splice(r,1);var o=e.numInvitations-1;a.collection("users").doc(t.state.teams.uniqname3).update({onTeam:!1,teamName:"",invitations:c,numInvitations:o})}})),x.getUserInfo(this.state.teams.uniqname4).then((function(e){if(e.onTeam&&e.teamName!==t.props.team){var s=e.invitations,n=s.indexOf(t.props.team);n>-1&&s.splice(n,1);var i=e.numInvitations-1;a.collection("users").doc(t.state.teams.uniqname4).update({onTeam:!1,teamName:"",invitations:s,numInvitations:i})}else{var c=e.invitations,r=c.indexOf(t.props.team);r>-1&&c.splice(r,1);var o=e.numInvitations-1;a.collection("users").doc(t.state.teams.uniqname4).update({onTeam:!1,teamName:"",invitations:c,numInvitations:o})}})),a.collection("teams").doc(this.props.team).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)})),this.setState({doneEditing:!0})}},{key:"render",value:function(){if(!0===this.state.doneEditing)return Object(s.jsx)("h2",{children:"Team Deleted Successfully"});if(!1===this.props.onTeam)return Object(s.jsx)("h2",{children:" This user is not on a team "});if(!0===this.state.dataLoaded){var e=this.state.teams;return console.log(this.state.teams),console.log("made it here"),Object(s.jsxs)(i.a.Fragment,{children:[Object(s.jsx)(q.a,{variant:"outline-danger",size:"sm",onClick:this.deleteTeam,children:"Delete Team"}),Object(s.jsx)("br",{}),Object(s.jsxs)(k.a,{borderless:!0,className:"w-25",children:[Object(s.jsxs)("thead",{children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{colSpan:"2",children:e.teamName}),Object(s.jsx)("th",{children:Object(s.jsx)(q.a,{id:"teamName",variant:"outline-danger",size:"sm",onClick:this.editTeam,children:"Edit"})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{}),Object(s.jsx)("th",{}),Object(s.jsx)("th",{})]})]}),Object(s.jsxs)("tbody",{children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{colSpan:"2",children:e.uniqname1}),Object(s.jsx)("td",{children:Object(s.jsx)(q.a,{id:"uniqname1",variant:"outline-danger",size:"sm",onClick:this.editTeam,children:"Edit"})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{colSpan:"2",children:e.uniqname2}),Object(s.jsx)("td",{children:Object(s.jsx)(q.a,{id:"uniqname2 ",variant:"outline-danger",size:"sm",onClick:this.editTeam,children:"Edit"})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{colSpan:"2",children:e.uniqname3}),Object(s.jsx)("td",{children:Object(s.jsx)(q.a,{id:"uniqname3",variant:"outline-danger",size:"sm",onClick:this.editTeam,children:"Edit"})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{colSpan:"2",children:e.uniqname4}),Object(s.jsx)("td",{children:Object(s.jsx)(q.a,{id:"uniqname4",variant:"outline-danger",size:"sm",onClick:this.editTeam,children:"Edit"})})]}),Object(s.jsx)("tr",{children:Object(s.jsx)("td",{colSpan:"3",children:e.description})})]})]})]})}return Object(s.jsx)("p",{children:"Loading..."})}}]),a}(i.a.Component),L=a(103),C=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={invitation:"",teamMems:[],dataLoaded:!1,accepted:!1,show:!1},s.viewInvitation=s.viewInvitation.bind(Object(g.a)(s)),s.handleShow=s.handleShow.bind(Object(g.a)(s)),s.handleHide=s.handleHide.bind(Object(g.a)(s)),s.acceptedTeam=s.acceptedTeam.bind(Object(g.a)(s)),s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(O.a)(p.a.mark((function e(){var t,a,s,n,i,c,r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.firestore().settings({timestampsInSnapshots:!0}),e.next=4,x.getUserInfo(sessionStorage.getItem("uniqname"));case 4:return t=e.sent,e.next=7,t.invitations[this.props.invNum];case 7:return a=e.sent,console.log("loading invitation at: ",t),this.setState({invitation:a}),e.next=12,x.getTeamInfo(this.state.invitation);case 12:s=e.sent,n=[],i=s.uniqname1,c=s.uniqname2,r=s.uniqname3,n.push(i),n.push(c),n.push(r);try{o=s.uniqname4,n.push(o)}catch(d){console.log(d)}this.setState({teamMems:n}),this.setState({dataLoaded:!0});case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"viewInvitation",value:function(){return!1===this.state.dataLoaded?Object(s.jsx)("h2",{children:"Loading..."}):Object(s.jsx)(L.a,{children:Object(s.jsxs)(L.a.Body,{children:[Object(s.jsx)(L.a.Title,{children:this.state.invitation}),Object(s.jsx)(L.a.Text,{children:this.state.teamMems.join(", ")}),Object(s.jsx)(q.a,{variant:"success",onClick:this.handleShow,children:"Join Team"})]})})}},{key:"handleShow",value:function(){console.log("made it here"),this.setState({show:!0})}},{key:"handleHide",value:function(){this.setState({show:!1})}},{key:"acceptedTeam",value:function(){var e=this,t=h.firestore();t.settings({timestampsInSnapshots:!0});var a,s=this.state.teamMems[0],n=this.state.teamMems[1],i=this.state.teamMems[2];4===this.state.teamMems.length&&(a=this.state.teamMems[3]);var c=sessionStorage.getItem("uniqname");switch(console.log(c),c){case s:t.collection("teams").doc(this.state.invitation).update({uniqname1Accepted:!0});break;case n:t.collection("teams").doc(this.state.invitation).update({uniqname2Accepted:!0});break;case i:t.collection("teams").doc(this.state.invitation).update({uniqname3Accepted:!0});break;case a:t.collection("teams").doc(this.state.invitation).update({uniqname4Accepted:!0})}t.collection("users").doc(sessionStorage.getItem("uniqname")).update({onTeam:!0,teamName:this.state.invitation}).then((function(){e.setState({accepted:!0})}))}},{key:"render",value:function(){return!0===this.state.accepted?(sessionStorage.setItem("user-type","team"),console.log("moving from invitation to view-team"),Object(s.jsx)(T.a,{to:"/view-team"})):Object(s.jsxs)("div",{className:"Invite",children:[this.viewInvitation(),Object(s.jsxs)(S.a,{show:this.state.show,onHide:this.handleHide,children:[Object(s.jsx)(S.a.Header,{closeButton:!0,children:Object(s.jsx)(S.a.Title,{children:"Do you want to accept this team Invitation?"})}),Object(s.jsxs)(S.a.Body,{children:[Object(s.jsx)("h2",{children:this.state.invitation}),Object(s.jsx)("p",{children:this.state.teamMems.join(", ")})]}),Object(s.jsxs)(S.a.Footer,{children:[Object(s.jsx)(q.a,{variant:"secondary",onClick:this.handleHide,children:"Cancel"}),Object(s.jsx)(q.a,{variant:"success",onClick:this.acceptedTeam,children:"Accept Invitation"})]})]}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{})]})}}]),a}(i.a.Component),E=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={numInv:0,uniqname:sessionStorage.getItem("uniqname"),usertype:sessionStorage.getItem("user-type"),dataLoaded:!1,onTeam:!1},s.renderInvitations=s.renderInvitations.bind(Object(g.a)(s)),s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(O.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("uniqname",this.state.uniqname),h.firestore().settings({timestampsInSnapshots:!0}),e.next=5,x.getUserInfo(this.state.uniqname).then((function(e){console.log("result",e),sessionStorage.setItem("user-type",e.usertype),t.setState(Object(j.a)({usertype:e.usertype,onTeam:"team"===e.usertype,numInv:e.numInvitations},"onTeam",e.onTeam)),e.onTeam&&sessionStorage.setItem("user-type","team")}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderInvitations",value:function(){var e=Array.from(Array(this.state.numInv)).map((function(e,t){return Object(s.jsx)(C,{invNum:t})}));return console.log(e),e}},{key:"render",value:function(){return sessionStorage.getItem("uniqname")?"team"===this.state.usertype?Object(s.jsx)(T.a,{to:"/view-team"}):"admin"===this.state.usertype?Object(s.jsx)(T.a,{to:"/admin-home"}):Object(s.jsxs)("div",{className:"Home",children:[Object(s.jsxs)(v.a,{bg:"light",expand:"lg",children:[Object(s.jsx)(v.a.Brand,{href:"/create-team",children:Object(s.jsx)("img",{src:"/EECS493_landscape.png",height:"30",className:"d-inline-block align-top",alt:"EECS 493 Teams logo"})}),Object(s.jsx)(v.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(s.jsxs)(v.a.Collapse,{id:"basic-navbar-nav",children:[Object(s.jsxs)(f.a,{className:"mr-auto",children:[Object(s.jsx)(f.a.Link,{href:"/create-team",children:"Create Team"}),Object(s.jsx)(f.a.Link,{href:"/team-invites",children:"Team Invitations"}),Object(s.jsx)(f.a.Link,{href:"/see-teams",children:"Registered Teams"})]}),Object(s.jsx)(f.a,{children:Object(s.jsx)(f.a.Link,{className:"mr-sm-2",href:"/",children:"Logout"})})]})]}),Object(s.jsx)("header",{className:"App-header",children:Object(s.jsxs)("div",{className:"body",children:[Object(s.jsx)("h1",{className:"title",children:"493 Team Invitations "}),Object(s.jsxs)("div",{className:"body-content",children:[Object(s.jsxs)("h2",{children:["You have (",this.state.numInv,") invitations"]}),this.renderInvitations(),Object(s.jsx)("br",{})]})]})})]}):Object(s.jsx)(T.a,{to:"/"})}}]),a}(i.a.Component),A=(a(85),a(42)),D=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={uniqname:sessionStorage.getItem("uniqname"),usertype:sessionStorage.getItem("user-type"),onTeam:!1,searched:!1,searchVal:"",searchType:"",foundTeam:!1,teamName:"",teams:[],teamsLoaded:!1,users:[],usersLoaded:!1},s.handleSearch=s.handleSearch.bind(Object(g.a)(s)),s.updateInput=s.updateInput.bind(Object(g.a)(s)),s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(O.a)(p.a.mark((function e(){var t,a,s,n=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=h.firestore()).settings({timestampsInSnapshots:!0}),e.next=4,x.getUserInfo(this.state.uniqname).then((function(e){n.setState({usertype:e.usertype}),sessionStorage.setItem("user-type",e.usertype),console.log("user data updated: ",e)}));case 4:return a=[],e.next=7,t.collection("teams").get().then((function(e){e.docs.forEach((function(e){a.push(e.data())})),n.setState({teams:a,teamsLoaded:!0}),console.log("teams loaded: ",a)}));case 7:return s=[],e.next=10,t.collection("users").get().then((function(e){e.docs.forEach((function(e){s.push(e.data())})),n.setState({users:s,usersLoaded:!0}),console.log("users_in loaded: ",s)}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateInput",value:function(e){this.setState(Object(j.a)({},e.target.name,e.target.value))}},{key:"handleSearch",value:function(e){var t=this;e.preventDefault(),!0===this.state.searched&&this.setState({searched:!1}),console.log(this.state);var a=h.firestore();if(a.settings({timestampsInSnapshots:!0}),console.log(this.state.searchType),"Teamname"===this.state.searchType){var s=this.state.searchVal.split(" ").join("");this.setState({searched:!0,foundTeam:!0,teamName:s})}else a.collection("users").doc(this.state.searchVal).get().then((function(e){console.log(e.data()),!1===e.data().onTeam?t.setState({searched:!0,foundTeam:!1}):(t.setState({teamName:e.data().teamName}),t.setState({searched:!0,foundTeam:!0}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){if(!sessionStorage.getItem("uniqname"))return console.log("redirecting to logout from admin home"),Object(s.jsx)(T.a,{to:"/"});if("team"===this.state.usertype)return console.log("redirecting from admin home to view team"),Object(s.jsx)(T.a,{to:"/view-team"});if("unassigned"===this.state.usertype)return console.log("redirecting from admin home to create team"),Object(s.jsx)(T.a,{to:"/create-team"});if(!0===this.state.searched)return this.state.teamName,sessionStorage.setItem("teamSearch",this.state.teamName),sessionStorage.setItem("userOnTeam",this.state.foundTeam),Object(s.jsx)(T.a,{to:"/admin-search"});JSON.stringify(this.state.teams);return Object(s.jsxs)("div",{className:"Home",children:[Object(s.jsxs)(v.a,{bg:"light",expand:"lg",children:[Object(s.jsx)(v.a.Brand,{href:"/admin-home",children:Object(s.jsx)("img",{src:"./EECS493-admin.png",height:"30",className:"d-inline-block align-top",alt:"EECS 493 Teams logo"})}),Object(s.jsx)(v.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(s.jsxs)(v.a.Collapse,{id:"basic-navbar-nav",children:[Object(s.jsxs)(f.a,{className:"mr-auto",children:[Object(s.jsx)(f.a.Link,{href:"/admin-home",children:"Home"}),Object(s.jsx)(f.a.Link,{href:"/admin-view",children:"Teams"})]}),Object(s.jsx)(f.a,{children:Object(s.jsx)(f.a.Link,{className:"mr-sm-2",href:"/",children:"Logout"})})]})]}),Object(s.jsx)("header",{className:"App-header",children:Object(s.jsxs)("div",{className:"body",children:[Object(s.jsxs)(y.a,{inline:!0,className:"search-bar w-100",onSubmit:this.handleSearch,children:[Object(s.jsxs)(y.a.Control,{as:"select",value:this.state.searchType,name:"searchType",onChange:this.updateInput,custom:!0,children:[Object(s.jsx)("option",{value:"default",children:"Search by..."}),Object(s.jsx)("option",{value:"Teamname",children:"Teamname"}),Object(s.jsx)("option",{value:"Uniqname",children:"Uniqname"})]}),Object(s.jsx)(y.a.Control,{required:!0,type:"text",name:"searchVal",value:this.state.searchVal,onChange:this.updateInput,placeholder:"Search by teamname or uniqname of team member",className:"mr-sm-2 w-75"}),Object(s.jsx)(q.a,{variant:"outline-success",type:"submit",children:"Search"})]}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),this.state.searched?Object(s.jsx)(w,{team:this.state.teamName,onTeam:this.state.foundTeam}):Object(s.jsxs)("div",{className:"w-100",children:[this.state.teamsLoaded&&Object(s.jsx)(A.CSVLink,{data:this.state.teams,filename:"teams.csv",className:"download-buttons btn btn-outline-secondary btn-lg",target:"_blank",children:"Download teams.csv"}),this.state.usersLoaded&&Object(s.jsx)(A.CSVLink,{data:this.state.users,filename:"users.csv",className:"download-buttons btn btn-outline-secondary btn-lg",target:"_blank",children:"Download users.csv"}),Object(s.jsx)(q.a,{variant:"outline-secondary",size:"lg",children:"Download unassigned.csv"})]})]})})]})}}]),a}(i.a.Component),H=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(o.a)(this,a),s=t.call(this,e),console.log("props",e),s.state={numInv:0,uniqname:sessionStorage.getItem("uniqname"),usertype:sessionStorage.getItem("user-type"),teams:[],teamsLoaded:!1,dataLoaded:!1,onTeam:!1},s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(O.a)(p.a.mark((function e(){var t,a,s=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getUserInfo(this.state.uniqname).then((function(e){s.setState({usertype:e.usertype,onTeam:"team"===e.usertype}),sessionStorage.setItem("user-type",e.usertype),console.log("user data updated: ",e)}));case 2:return(t=h.firestore()).settings({timestampsInSnapshots:!0}),a=[],e.next=7,t.collection("teams").get().then((function(e){e.docs.forEach((function(e){a.push(e.data())})),s.setState({teams:a,teamsLoaded:!0}),console.log("oh dear",a)}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){if(!sessionStorage.getItem("uniqname"))return Object(s.jsx)(T.a,{to:"/"});if("admin"===this.state.usertype)return Object(s.jsx)(T.a,{to:"/admin-home"});var e="team"===this.state.usertype,t=this.state.teams.map((function(e){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:e.teamName}),Object(s.jsxs)("td",{children:[e.uniqname1Accepted?e.uniqname1:"",e.uniqname2Accepted?", "+e.uniqname2:"",e.uniqname3Accepted?", "+e.uniqname3:"",e.uniqname4Accepted?", "+e.uniqname4:""]}),Object(s.jsx)("td",{children:e.description})]})}));return Object(s.jsxs)("div",{className:"viewteam",children:[e?Object(s.jsxs)(v.a,{bg:"light",expand:"lg",children:[Object(s.jsx)(v.a.Brand,{href:"/view-team",children:Object(s.jsx)("img",{src:"/EECS493_landscape.png",height:"30",className:"d-inline-block align-top",alt:"EECS 493 Teams logo"})}),Object(s.jsx)(v.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(s.jsxs)(v.a.Collapse,{id:"basic-navbar-nav",children:[Object(s.jsxs)(f.a,{className:"mr-auto",children:[Object(s.jsx)(f.a.Link,{href:"/view-team",children:"My Team"}),Object(s.jsx)(f.a.Link,{href:"/see-teams",children:"All Teams"})]}),Object(s.jsx)(f.a,{children:Object(s.jsx)(f.a.Link,{className:"mr-sm-2",href:"/",children:"Logout"})})]})]}):Object(s.jsxs)(v.a,{bg:"light",expand:"lg",children:[Object(s.jsx)(v.a.Brand,{href:"/create-team",children:Object(s.jsx)("img",{src:"/EECS493_landscape.png",height:"30",className:"d-inline-block align-top",alt:"EECS 493 Teams logo"})}),Object(s.jsx)(v.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(s.jsxs)(v.a.Collapse,{id:"basic-navbar-nav",children:[Object(s.jsxs)(f.a,{className:"mr-auto",children:[Object(s.jsx)(f.a.Link,{href:"/create-team",children:"Create Team"}),Object(s.jsx)(f.a.Link,{href:"/team-invites",children:"Team Invitations"}),Object(s.jsx)(f.a.Link,{href:"/see-teams",children:"Registered Teams"})]}),Object(s.jsx)(f.a,{children:Object(s.jsx)(f.a.Link,{className:"mr-sm-2",href:"/",children:"Logout"})})]})]}),this.state.teamsLoaded?Object(s.jsx)("header",{className:"loggedInHeader",children:Object(s.jsxs)("div",{className:"body",children:[Object(s.jsx)("h1",{className:"title",children:"Registered Teams"}),Object(s.jsx)("div",{className:"body-content",children:Object(s.jsxs)(k.a,{className:"seeTeams",responsive:"sm",bordered:!0,hover:!0,striped:!0,children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{className:"seeTeams",children:"Name"}),Object(s.jsx)("th",{className:"seeTeams",children:"Registered Team Members"}),Object(s.jsx)("th",{className:"seeTeams",children:"Description"})]})}),Object(s.jsx)("tbody",{striped:!0,hover:!0,children:t})]})})]})}):Object(s.jsx)("header",{className:"loggedInHeader",children:Object(s.jsxs)("div",{className:"body",children:[Object(s.jsx)("h1",{className:"title",children:"Loading..."}),Object(s.jsx)("div",{className:"body-content"})]})})]})}}]),a}(i.a.Component),U=a(96),F=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(o.a)(this,a),s=t.call(this,e),console.log("props",e),s.state={numInv:0,uniqname:sessionStorage.getItem("uniqname"),usertype:sessionStorage.getItem("user-type"),dataLoaded:!1,onTeam:!1,teamsLoaded:!1,teams:[],users:[],usersLoaded:!1},s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(O.a)(p.a.mark((function e(){var t,a,s,n=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=h.firestore()).settings({timestampsInSnapshots:!0}),e.next=4,x.getUserInfo(this.state.uniqname).then((function(e){n.setState({usertype:e.usertype,onTeam:"team"===e.usertype}),sessionStorage.setItem("user-type",e.usertype),console.log("user data updated: ",e)}));case 4:return a=[],e.next=7,t.collection("teams").get().then((function(e){e.docs.forEach((function(e){a.push(e.data())})),n.setState({teams:a,teamsLoaded:!0}),console.log("teams loaded: ",a)}));case 7:return s=[],e.next=10,t.collection("users").get().then((function(e){e.docs.forEach((function(e){s.push(e.data())})),n.setState({users:s,usersLoaded:!0}),console.log("users_in loaded: ",s)}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){if(!sessionStorage.getItem("uniqname"))return console.log("redirecting from admin see teams to logout"),Object(s.jsx)(T.a,{to:"/"});if("team"===this.state.usertype)return console.log("redirecting from admin see teams to view team"),Object(s.jsx)(T.a,{to:"/view-team"});if("unassigned"===this.state.usertype)return console.log("redirecting from admin see teams to create team"),Object(s.jsx)(T.a,{to:"/create-team"});var e=this.state.teams.map((function(e){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:e.teamName}),Object(s.jsxs)("td",{children:[e.uniqname1Accepted?e.uniqname1:"",e.uniqname2Accepted?", "+e.uniqname2:"",e.uniqname3Accepted?", "+e.uniqname3:"",e.uniqname4Accepted?", "+e.uniqname4:""]}),Object(s.jsx)("td",{children:e.description})]})}));return Object(s.jsxs)("div",{className:"admin-see-teams",children:[Object(s.jsxs)(v.a,{bg:"light",expand:"lg",children:[Object(s.jsx)(v.a.Brand,{href:"/admin-home",children:Object(s.jsx)("img",{src:"./EECS493-admin.png",height:"30",className:"d-inline-block align-top",alt:"EECS 493 Teams logo"})}),Object(s.jsx)(v.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(s.jsxs)(v.a.Collapse,{id:"basic-navbar-nav",children:[Object(s.jsxs)(f.a,{className:"mr-auto",children:[Object(s.jsx)(f.a.Link,{href:"/admin-home",children:"Home"}),Object(s.jsx)(f.a.Link,{href:"/admin-view",children:"Teams"})]}),Object(s.jsx)(f.a,{children:Object(s.jsx)(f.a.Link,{className:"mr-sm-2",href:"/",children:"Logout"})})]})]}),this.state.teamsLoaded?Object(s.jsx)("header",{className:"loggedInHeader",children:Object(s.jsxs)("div",{className:"body",children:[Object(s.jsxs)(U.a,{children:[Object(s.jsx)("h1",{className:"title",children:"Registered Teams"}),Object(s.jsx)(A.CSVLink,{data:this.state.teams,filename:"teams.csv",className:"download-buttons btn btn-outline-secondary btn-lg",target:"_blank",children:"Download teams.csv"}),this.state.usersLoaded&&Object(s.jsx)(A.CSVLink,{data:this.state.users,filename:"users.csv",className:"download-buttons btn btn-outline-secondary btn-lg",target:"_blank",children:"Download users.csv"})]}),Object(s.jsx)("div",{className:"body-content",children:Object(s.jsxs)(k.a,{className:"seeTeams",responsive:"sm",bordered:!0,hover:!0,striped:!0,children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{className:"seeTeams",children:"Name"}),Object(s.jsx)("th",{className:"seeTeams",children:"Registered Team Members"}),Object(s.jsx)("th",{className:"seeTeams",children:"Description"})]})}),Object(s.jsx)("tbody",{striped:!0,hover:!0,children:e})]})})]})}):Object(s.jsx)("header",{className:"loggedInHeader",children:Object(s.jsxs)("div",{className:"body",children:[Object(s.jsx)("h1",{className:"title",children:"Loading..."}),Object(s.jsx)("div",{className:"body-content"})]})})]})}}]),a}(i.a.Component),M=(a(90),a(61)),B="718813902892-24n6sjnr041if9ip2dcf68kvvi4q1ssn.apps.googleusercontent.com",_=h.firestore(),z=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={isLoggedIn:!1,accessToken:""},s.login=s.login.bind(Object(g.a)(s)),s.handleLoginFailure=s.handleLoginFailure.bind(Object(g.a)(s)),s.logout=s.logout.bind(Object(g.a)(s)),s.handleLogoutFailure=s.handleLogoutFailure.bind(Object(g.a)(s)),s}return Object(d.a)(a,[{key:"login",value:function(){var e=Object(O.a)(p.a.mark((function e(t){var a,s,n,i,c=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.accessToken&&(this.setState((function(e){return{isLoggedIn:!0,accessToken:t.accessToken}})),a="",s=t.profileObj.email,console.log("get status email: "),s.endsWith("@umich.edu")||(console.log("not umich email address"),a="Must be a University of Michigan email address"),n=s.split("@"),i=n[0],_.collection("users").doc(i).get().then((function(e){console.log("snapshot",e.data()),e.empty&&(console.log("return status"),a="not on roster"),a=e.data().isAdmin?"admin":e.data().onTeam?"team":"unassigned",c.props.callback({status:"success",type:"login","user-type":a,uniqname:i,accessToken:c.state.accessToken})})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(e){this.setState((function(e){return{isLoggedIn:!1,accessToken:""}})),sessionStorage.clear(),this.props.callback({status:"success",type:"logout"})}},{key:"handleLoginFailure",value:function(e){alert("Failed to log in"),this.props.callback({status:"error",type:"login"})}},{key:"handleLogoutFailure",value:function(e){alert("Failed to log out"),this.props.callback({status:"error",type:"logout"})}},{key:"render",value:function(){return Object(s.jsx)("div",{children:this.state.isLoggedIn?Object(s.jsx)(M.GoogleLogout,{clientId:B,buttonText:"Logout",onLogoutSuccess:this.logout,onFailure:this.handleLogoutFailure}):Object(s.jsx)(M.GoogleLogin,{clientId:B,buttonText:"Login",onSuccess:this.login,onFailure:this.handleLoginFailure,cookiePolicy:"single_host_origin",responseType:"code,token"})})}}]),a}(i.a.Component),R=a(97),V=a(98),G=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={uniqname:sessionStorage.getItem("uniqname"),usertype:sessionStorage.getItem("user-type"),loggedin:!1,data:{}},s.handleLogin=s.handleLogin.bind(Object(g.a)(s)),s}return Object(d.a)(a,[{key:"handleLogin",value:function(e){this.setState({data:e}),"user-type"in e&&(sessionStorage.setItem("uniqname",e.uniqname),sessionStorage.setItem("user-type",e["user-type"]),console.log("setting user-type to: ",sessionStorage.getItem("user-type")),this.setState({loggedin:!0,data:{usertype:e["user-type"],uniqname:e.uniqname,accessToken:e.accessToken}}))}},{key:"render",value:function(){return console.log("am i admin",this.state.data.usertype),this.state.loggedin&&"not umich email address"!==this.state.data.usertype&&"'not on roster'"!==this.state.data.usertype?this.state.loggedin&&"admin"===this.state.data.usertype?Object(s.jsx)(T.a,{to:"/admin-home"}):this.state.loggedin&&"unassigned"===this.state.data.usertype?Object(s.jsx)(T.a,{to:"/create-team"}):this.state.loggedin&&"team"===this.state.data.usertype?Object(s.jsx)(T.a,{to:"/view-team"}):void 0:Object(s.jsx)("div",{className:"Home",children:Object(s.jsxs)("header",{className:"App-header",children:[Object(s.jsx)(R.a,{src:"./EECS493_landscape.png",fluid:!0}),Object(s.jsxs)(U.a,{children:[Object(s.jsx)("i",{className:"mr-2",children:"Sign in to view your team"}),Object(s.jsx)(z,{className:"loginButton ml-2",callback:this.handleLogin})]}),Object(s.jsxs)(V.a,{className:" instructions justify-content-md-center mb-10 w-75",children:[Object(s.jsx)(L.a,{bg:"info",className:"cardclass",children:Object(s.jsxs)(L.a.Body,{children:[Object(s.jsx)(L.a.Title,{children:"Step 1"}),Object(s.jsxs)(L.a.Text,{children:["Find a group of 4 students who have similar interests as you on the ",Object(s.jsx)("a",{children:"Class Team-Finding Google Sheet."})]})]})}),Object(s.jsx)(L.a,{bg:"primary",className:"cardclass",children:Object(s.jsxs)(L.a.Body,{children:[Object(s.jsx)(L.a.Title,{children:"Step 2"}),Object(s.jsx)(L.a.Text,{children:"Log into EECS 493 Teams. Have 1 team member create the team, then have all other team members log in to accept the invitation."})]})}),Object(s.jsx)(L.a,{bg:"success",className:"cardclass",children:Object(s.jsxs)(L.a.Body,{children:[Object(s.jsx)(L.a.Title,{children:"Step 3"}),Object(s.jsx)(L.a.Text,{children:"Continue using EECS 493 Teams to see your team members' progress!"})]})})]})]})})}}]),a}(i.a.Component),P=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(s.jsx)("div",{className:"App",children:Object(s.jsxs)(T.d,{children:[Object(s.jsx)(T.b,{path:"/create-team",children:Object(s.jsx)(I,{})}),Object(s.jsx)(T.b,{path:"/team-invites",children:Object(s.jsx)(E,{})}),Object(s.jsx)(T.b,{path:"/admin-home",children:Object(s.jsx)(D,{})}),Object(s.jsx)(T.b,{path:"/admin-view",children:Object(s.jsx)(F,{})}),Object(s.jsx)(T.b,{path:"/view-team",children:Object(s.jsx)(N,{})}),Object(s.jsx)(T.b,{path:"/see-teams",children:Object(s.jsx)(H,{})}),Object(s.jsx)(T.b,{path:"/",children:Object(s.jsx)(G,{})})]})})}}]),a}(i.a.Component),J=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,104)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),s(e),n(e),i(e),c(e)}))},Y=a(25);r.a.render(Object(s.jsx)(Y.a,{children:Object(s.jsx)(P,{})}),document.getElementById("root")),J()}},[[91,1,2]]]);
//# sourceMappingURL=main.02da0643.chunk.js.map